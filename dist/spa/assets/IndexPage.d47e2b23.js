import{c as Ce,h as Ee,e as Hr,f as Nr,a as Kr,i as Ki,b as Wr}from"./dom.c33bb192.js";import{i as Tn,q as Ze,s as Jr,u as Gr,c as S,h as O,g as de,w as Z,o as At,l as ge,H as Qr,r as K,I as Wi,J as qn,K as Ji,L as be,m as ae,M as Xt,N as Gi,k as Yr,O as ke,P as Kt,Q as Qi,R as xe,S as Re,U as Zt,V as Xr,W as ri,X as Zr,p as Se,Y as si,a as es,Z as ts,$ as ns,a0 as oi,a1 as is,n as rs,a2 as ss,a3 as os,a4 as dt,a5 as $t,d as Yi,y as Xi,a6 as as,j as $e,z as ls,A as us}from"./index.caf6f8fd.js";import{Q as rt,a as cs,u as ds,b as hs,R as fs,c as vs,d as ms,v as gs,g as fn,e as Zi,f as ps}from"./QBtn.5cf6dfd5.js";import{c as ys,g as bs,b as ws,a as _s,h as Ss}from"./scroll.afd0f939.js";import{u as ks}from"./vue-i18n.runtime.ba5234f0.js";function xs(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Cs=Ce({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:n}}=de(),i=Tn(Jr,Ze);if(i===Ze)return console.error("QPage needs to be a deep child of QLayout"),Ze;if(Tn(Gr,Ze)===Ze)return console.error("QPage needs to be child of QPageContainer"),Ze;const s=S(()=>{const a=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof t.styleFn=="function"){const l=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return t.styleFn(a,l)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-a+"px":n.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":n.screen.height-a+"px"}}),o=S(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>O("main",{class:o.value,style:s.value},Ee(e.default))}});const en={dark:{type:Boolean,default:null}};function tn(t,e){return S(()=>t.dark===null?e.dark.isActive:t.dark)}function Ts({validate:t,resetValidation:e,requiresQForm:n}){const i=Tn(Qr,!1);if(i!==!1){const{props:r,proxy:s}=de();Object.assign(s,{validate:t,resetValidation:e}),Z(()=>r.disable,o=>{o===!0?(typeof e=="function"&&e(),i.unbindComponent(s)):i.bindComponent(s)}),At(()=>{r.disable!==!0&&i.bindComponent(s)}),ge(()=>{r.disable!==!0&&i.unbindComponent(s)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const ai=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,li=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,ui=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Vt=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Mt=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,vn={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>ai.test(t),hexaColor:t=>li.test(t),hexOrHexaColor:t=>ui.test(t),rgbColor:t=>Vt.test(t),rgbaColor:t=>Mt.test(t),rgbOrRgbaColor:t=>Vt.test(t)||Mt.test(t),hexOrRgbColor:t=>ai.test(t)||Vt.test(t),hexaOrRgbaColor:t=>li.test(t)||Mt.test(t),anyColor:t=>ui.test(t)||Vt.test(t)||Mt.test(t)},Es=[!0,!1,"ondemand"],Os={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:t=>Es.includes(t)}};function As(t,e){const{props:n,proxy:i}=de(),r=K(!1),s=K(null),o=K(null);Ts({validate:g,resetValidation:f});let a=0,l;const c=S(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),u=S(()=>n.disable!==!0&&c.value===!0),h=S(()=>n.error===!0||r.value===!0),m=S(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:s.value);Z(()=>n.modelValue,()=>{C()}),Z(()=>n.reactiveRules,F=>{F===!0?l===void 0&&(l=Z(()=>n.rules,()=>{C(!0)})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),Z(t,F=>{F===!0?o.value===null&&(o.value=!1):o.value===!1&&(o.value=!0,u.value===!0&&n.lazyRules!=="ondemand"&&e.value===!1&&y())});function f(){a++,e.value=!1,o.value=null,r.value=!1,s.value=null,y.cancel()}function g(F=n.modelValue){if(u.value!==!0)return!0;const T=++a,$=e.value!==!0?()=>{o.value=!0}:()=>{},I=(N,B)=>{N===!0&&$(),r.value=N,s.value=B||null,e.value=!1},V=[];for(let N=0;N<n.rules.length;N++){const B=n.rules[N];let Q;if(typeof B=="function"?Q=B(F,vn):typeof B=="string"&&vn[B]!==void 0&&(Q=vn[B](F)),Q===!1||typeof Q=="string")return I(!0,Q),!1;Q!==!0&&Q!==void 0&&V.push(Q)}return V.length===0?(I(!1),!0):(e.value=!0,Promise.all(V).then(N=>{if(N===void 0||Array.isArray(N)===!1||N.length===0)return T===a&&I(!1),!0;const B=N.find(Q=>Q===!1||typeof Q=="string");return T===a&&I(B!==void 0,B),B===void 0},N=>(T===a&&(console.error(N),I(!0)),!1)))}function C(F){u.value===!0&&n.lazyRules!=="ondemand"&&(o.value===!0||n.lazyRules!==!0&&F!==!0)&&y()}const y=Wi(g,0);return ge(()=>{l!==void 0&&l(),y.cancel()}),Object.assign(i,{resetValidation:f,validate:g}),qn(i,"hasError",()=>h.value),{isDirtyModel:o,hasRules:c,hasError:h,errorMessage:m,validate:g,resetValidation:f}}const ci=/^on[A-Z]/;function $s(t,e){const n={listeners:K({}),attributes:K({})};function i(){const r={},s={};for(const o in t)o!=="class"&&o!=="style"&&ci.test(o)===!1&&(r[o]=t[o]);for(const o in e.props)ci.test(o)===!0&&(s[o]=e.props[o]);n.attributes.value=r,n.listeners.value=s}return Ji(i),i(),n}let mn,Ft=0;const ue=new Array(256);for(let t=0;t<256;t++)ue[t]=(t+256).toString(16).substring(1);const Rs=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let i=e;i>0;i--)n.push(Math.floor(Math.random()*256));return n}})(),di=4096;function Ps(){(mn===void 0||Ft+16>di)&&(Ft=0,mn=Rs(di));const t=Array.prototype.slice.call(mn,Ft,Ft+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,ue[t[0]]+ue[t[1]]+ue[t[2]]+ue[t[3]]+"-"+ue[t[4]]+ue[t[5]]+"-"+ue[t[6]]+ue[t[7]]+"-"+ue[t[8]]+ue[t[9]]+"-"+ue[t[10]]+ue[t[11]]+ue[t[12]]+ue[t[13]]+ue[t[14]]+ue[t[15]]}let Ue=[],xt=[];function er(t){xt=xt.filter(e=>e!==t)}function js(t){er(t),xt.push(t)}function hi(t){er(t),xt.length===0&&Ue.length!==0&&(Ue[Ue.length-1](),Ue=[])}function nn(t){xt.length===0?t():Ue.push(t)}function qs(t){Ue=Ue.filter(e=>e!==t)}function En(t){return t===void 0?`f_${Ps()}`:t}function Ct(t){return t!=null&&(""+t).length!==0}const rn={...en,...Os,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},In=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function Ln(){const{props:t,attrs:e,proxy:n,vnode:i}=de();return{isDark:tn(t,n.$q),editable:S(()=>t.disable!==!0&&t.readonly!==!0),innerLoading:K(!1),focused:K(!1),hasPopupOpen:!1,splitAttrs:$s(e,i),targetUid:K(En(t.for)),rootRef:K(null),targetRef:K(null),controlRef:K(null)}}function Vn(t){const{props:e,emit:n,slots:i,attrs:r,proxy:s}=de(),{$q:o}=s;let a=null;t.hasValue===void 0&&(t.hasValue=S(()=>Ct(e.modelValue))),t.emitValue===void 0&&(t.emitValue=w=>{n("update:modelValue",w)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:b,onFocusout:k}),Object.assign(t,{clearValue:R,onControlFocusin:b,onControlFocusout:k,focus:B}),t.computedCounter===void 0&&(t.computedCounter=S(()=>{if(e.counter!==!1){const w=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,H=e.maxlength!==void 0?e.maxlength:e.maxValues;return w+(H!==void 0?" / "+H:"")}}));const{isDirtyModel:l,hasRules:c,hasError:u,errorMessage:h,resetValidation:m}=As(t.focused,t.innerLoading),f=t.floatingLabel!==void 0?S(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):S(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),g=S(()=>e.bottomSlots===!0||e.hint!==void 0||c.value===!0||e.counter===!0||e.error!==null),C=S(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),y=S(()=>`q-field row no-wrap items-start q-field--${C.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(f.value===!0?" q-field--float":"")+(T.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(u.value===!0?" q-field--error":"")+(u.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&g.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),F=S(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(u.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),T=S(()=>e.labelSlot===!0||e.label!==void 0),$=S(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&u.value!==!0?` text-${e.labelColor}`:"")),I=S(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:f.value,modelValue:e.modelValue,emitValue:t.emitValue})),V=S(()=>{const w={for:t.targetUid.value};return e.disable===!0?w["aria-disabled"]="true":e.readonly===!0&&(w["aria-readonly"]="true"),w});Z(()=>e.for,w=>{t.targetUid.value=En(w)});function N(){const w=document.activeElement;let H=t.targetRef!==void 0&&t.targetRef.value;H&&(w===null||w.id!==t.targetUid.value)&&(H.hasAttribute("tabindex")===!0||(H=H.querySelector("[tabindex]")),H&&H!==w&&H.focus({preventScroll:!0}))}function B(){nn(N)}function Q(){qs(N);const w=document.activeElement;w!==null&&t.rootRef.value.contains(w)&&w.blur()}function b(w){a!==null&&(clearTimeout(a),a=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",w))}function k(w,H){a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,n("blur",w)),H!==void 0&&H())})}function R(w){be(w),o.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),n("clear",e.modelValue),ae(()=>{m(),o.platform.is.mobile!==!0&&(l.value=!1)})}function x(){const w=[];return i.prepend!==void 0&&w.push(O("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:ke},i.prepend())),w.push(O("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},U())),u.value===!0&&e.noErrorIcon===!1&&w.push(J("error",[O(rt,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?w.push(J("inner-loading-append",i.loading!==void 0?i.loading():[O(cs,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&w.push(J("inner-clearable-append",[O(rt,{class:"q-field__focusable-action",tag:"button",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:R})])),i.append!==void 0&&w.push(O("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:ke},i.append())),t.getInnerAppend!==void 0&&w.push(J("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&w.push(t.getControlChild()),w}function U(){const w=[];return e.prefix!==void 0&&e.prefix!==null&&w.push(O("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&w.push(t.getShadowControl()),t.getControl!==void 0?w.push(t.getControl()):i.rawControl!==void 0?w.push(i.rawControl()):i.control!==void 0&&w.push(O("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},i.control(I.value))),T.value===!0&&w.push(O("div",{class:$.value},Ee(i.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&w.push(O("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),w.concat(Ee(i.default))}function z(){let w,H;u.value===!0?h.value!==null?(w=[O("div",{role:"alert"},h.value)],H=`q--slot-error-${h.value}`):(w=Ee(i.error),H="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(w=[O("div",e.hint)],H=`q--slot-hint-${e.hint}`):(w=Ee(i.hint),H="q--slot-hint"));const ie=e.counter===!0||i.counter!==void 0;if(e.hideBottomSpace===!0&&ie===!1&&w===void 0)return;const p=O("div",{key:H,class:"q-field__messages col"},w);return O("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:ke},[e.hideBottomSpace===!0?p:O(Kt,{name:"q-transition--field-message"},()=>p),ie===!0?O("div",{class:"q-field__counter"},i.counter!==void 0?i.counter():t.computedCounter.value):null])}function J(w,H){return H===null?null:O("div",{key:w,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},H)}let D=!1;return Xt(()=>{D=!0}),Gi(()=>{D===!0&&e.autofocus===!0&&s.focus()}),At(()=>{Yr.value===!0&&e.for===void 0&&(t.targetUid.value=En()),e.autofocus===!0&&s.focus()}),ge(()=>{a!==null&&clearTimeout(a)}),Object.assign(s,{focus:B,blur:Q}),function(){const H=t.getControl===void 0&&i.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...V.value}:V.value;return O("label",{ref:t.rootRef,class:[y.value,r.class],style:r.style,...H},[i.before!==void 0?O("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:ke},i.before()):null,O("div",{class:"q-field__inner relative-position col self-stretch"},[O("div",{ref:t.controlRef,class:F.value,tabindex:-1,...t.controlEvents},x()),g.value===!0?z():null]),i.after!==void 0?O("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:ke},i.after()):null])}}const fi={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Wt={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},tr=Object.keys(Wt);tr.forEach(t=>{Wt[t].regex=new RegExp(Wt[t].pattern)});const Is=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+tr.join("")+"])|(.)","g"),vi=/[.*+?^${}()|[\]\\]/g,oe=String.fromCharCode(1),Ls={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Vs(t,e,n,i){let r,s,o,a,l,c;const u=K(null),h=K(f());function m(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}Z(()=>t.type+t.autogrow,C),Z(()=>t.mask,b=>{if(b!==void 0)y(h.value,!0);else{const k=B(h.value);C(),t.modelValue!==k&&e("update:modelValue",k)}}),Z(()=>t.fillMask+t.reverseFillMask,()=>{u.value===!0&&y(h.value,!0)}),Z(()=>t.unmaskedValue,()=>{u.value===!0&&y(h.value)});function f(){if(C(),u.value===!0){const b=V(B(t.modelValue));return t.fillMask!==!1?Q(b):b}return t.modelValue}function g(b){if(b<r.length)return r.slice(-b);let k="",R=r;const x=R.indexOf(oe);if(x>-1){for(let U=b-R.length;U>0;U--)k+=oe;R=R.slice(0,x)+k+R.slice(x)}return R}function C(){if(u.value=t.mask!==void 0&&t.mask.length!==0&&m(),u.value===!1){a=void 0,r="",s="";return}const b=fi[t.mask]===void 0?t.mask:fi[t.mask],k=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",R=k.replace(vi,"\\$&"),x=[],U=[],z=[];let J=t.reverseFillMask===!0,D="",w="";b.replace(Is,(_,v,j,G,L)=>{if(G!==void 0){const P=Wt[G];z.push(P),w=P.negate,J===!0&&(U.push("(?:"+w+"+)?("+P.pattern+"+)?(?:"+w+"+)?("+P.pattern+"+)?"),J=!1),U.push("(?:"+w+"+)?("+P.pattern+")?")}else if(j!==void 0)D="\\"+(j==="\\"?"":j),z.push(j),x.push("([^"+D+"]+)?"+D+"?");else{const P=v!==void 0?v:L;D=P==="\\"?"\\\\\\\\":P.replace(vi,"\\\\$&"),z.push(P),x.push("([^"+D+"]+)?"+D+"?")}});const H=new RegExp("^"+x.join("")+"("+(D===""?".":"[^"+D+"]")+"+)?"+(D===""?"":"["+D+"]*")+"$"),ie=U.length-1,p=U.map((_,v)=>v===0&&t.reverseFillMask===!0?new RegExp("^"+R+"*"+_):v===ie?new RegExp("^"+_+"("+(w===""?".":w)+"+)?"+(t.reverseFillMask===!0?"$":R+"*")):new RegExp("^"+_));o=z,a=_=>{const v=H.exec(t.reverseFillMask===!0?_:_.slice(0,z.length+1));v!==null&&(_=v.slice(1).join(""));const j=[],G=p.length;for(let L=0,P=_;L<G;L++){const M=p[L].exec(P);if(M===null)break;P=P.slice(M.shift().length),j.push(...M)}return j.length!==0?j.join(""):_},r=z.map(_=>typeof _=="string"?_:oe).join(""),s=r.split(oe).join(k)}function y(b,k,R){const x=i.value,U=x.selectionEnd,z=x.value.length-U,J=B(b);k===!0&&C();const D=V(J),w=t.fillMask!==!1?Q(D):D,H=h.value!==w;x.value!==w&&(x.value=w),H===!0&&(h.value=w),document.activeElement===x&&ae(()=>{if(w===s){const p=t.reverseFillMask===!0?s.length:0;x.setSelectionRange(p,p,"forward");return}if(R==="insertFromPaste"&&t.reverseFillMask!==!0){const p=x.selectionEnd;let _=U-1;for(let v=l;v<=_&&v<p;v++)r[v]!==oe&&_++;T.right(x,_);return}if(["deleteContentBackward","deleteContentForward"].indexOf(R)>-1){const p=t.reverseFillMask===!0?U===0?w.length>D.length?1:0:Math.max(0,w.length-(w===s?0:Math.min(D.length,z)+1))+1:U;x.setSelectionRange(p,p,"forward");return}if(t.reverseFillMask===!0)if(H===!0){const p=Math.max(0,w.length-(w===s?0:Math.min(D.length,z+1)));p===1&&U===1?x.setSelectionRange(p,p,"forward"):T.rightReverse(x,p)}else{const p=w.length-z;x.setSelectionRange(p,p,"backward")}else if(H===!0){const p=Math.max(0,r.indexOf(oe),Math.min(D.length,U)-1);T.right(x,p)}else{const p=U-1;T.right(x,p)}});const ie=t.unmaskedValue===!0?B(w):w;String(t.modelValue)!==ie&&n(ie,!0)}function F(b,k,R){const x=V(B(b.value));k=Math.max(0,r.indexOf(oe),Math.min(x.length,k)),l=k,b.setSelectionRange(k,R,"forward")}const T={left(b,k){const R=r.slice(k-1).indexOf(oe)===-1;let x=Math.max(0,k-1);for(;x>=0;x--)if(r[x]===oe){k=x,R===!0&&k++;break}if(x<0&&r[k]!==void 0&&r[k]!==oe)return T.right(b,0);k>=0&&b.setSelectionRange(k,k,"backward")},right(b,k){const R=b.value.length;let x=Math.min(R,k+1);for(;x<=R;x++)if(r[x]===oe){k=x;break}else r[x-1]===oe&&(k=x);if(x>R&&r[k-1]!==void 0&&r[k-1]!==oe)return T.left(b,R);b.setSelectionRange(k,k,"forward")},leftReverse(b,k){const R=g(b.value.length);let x=Math.max(0,k-1);for(;x>=0;x--)if(R[x-1]===oe){k=x;break}else if(R[x]===oe&&(k=x,x===0))break;if(x<0&&R[k]!==void 0&&R[k]!==oe)return T.rightReverse(b,0);k>=0&&b.setSelectionRange(k,k,"backward")},rightReverse(b,k){const R=b.value.length,x=g(R),U=x.slice(0,k+1).indexOf(oe)===-1;let z=Math.min(R,k+1);for(;z<=R;z++)if(x[z-1]===oe){k=z,k>0&&U===!0&&k--;break}if(z>R&&x[k-1]!==void 0&&x[k-1]!==oe)return T.leftReverse(b,R);b.setSelectionRange(k,k,"forward")}};function $(b){e("click",b),c=void 0}function I(b){if(e("keydown",b),Qi(b)===!0||b.altKey===!0)return;const k=i.value,R=k.selectionStart,x=k.selectionEnd;if(b.shiftKey||(c=void 0),b.keyCode===37||b.keyCode===39){b.shiftKey&&c===void 0&&(c=k.selectionDirection==="forward"?R:x);const U=T[(b.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(b.preventDefault(),U(k,c===R?x:R),b.shiftKey){const z=k.selectionStart;k.setSelectionRange(Math.min(c,z),Math.max(c,z),"forward")}}else b.keyCode===8&&t.reverseFillMask!==!0&&R===x?(T.left(k,R),k.setSelectionRange(k.selectionStart,x,"backward")):b.keyCode===46&&t.reverseFillMask===!0&&R===x&&(T.rightReverse(k,x),k.setSelectionRange(R,k.selectionEnd,"forward"))}function V(b){if(b==null||b==="")return"";if(t.reverseFillMask===!0)return N(b);const k=o;let R=0,x="";for(let U=0;U<k.length;U++){const z=b[R],J=k[U];if(typeof J=="string")x+=J,z===J&&R++;else if(z!==void 0&&J.regex.test(z))x+=J.transform!==void 0?J.transform(z):z,R++;else return x}return x}function N(b){const k=o,R=r.indexOf(oe);let x=b.length-1,U="";for(let z=k.length-1;z>=0&&x>-1;z--){const J=k[z];let D=b[x];if(typeof J=="string")U=J+U,D===J&&x--;else if(D!==void 0&&J.regex.test(D))do U=(J.transform!==void 0?J.transform(D):D)+U,x--,D=b[x];while(R===z&&D!==void 0&&J.regex.test(D));else return U}return U}function B(b){return typeof b!="string"||a===void 0?typeof b=="number"?a(""+b):b:a(b)}function Q(b){return s.length-b.length<=0?b:t.reverseFillMask===!0&&b.length!==0?s.slice(0,-b.length)+b:b+s.slice(b.length)}return{innerValue:h,hasMask:u,moveCursorForPaste:F,updateMaskValue:y,onMaskedKeydown:I,onMaskedClick:$}}const nr={name:String};function ir(t){return S(()=>t.name||t.for)}function Ms(t,e){function n(){const i=t.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(i)===i&&("length"in i?Array.from(i):[i]).forEach(s=>{r.items.add(s)}),{files:r.files}}catch{return{files:void 0}}}return e===!0?S(()=>{if(t.type==="file")return n()}):S(n)}const Fs=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Ds=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Bs=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Us=/[a-z0-9_ -]$/i;function rr(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(xe.is.firefox===!0?Us.test(n.data)===!1:Fs.test(n.data)===!0||Ds.test(n.data)===!0||Bs.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var Dt=Ce({name:"QInput",inheritAttrs:!1,props:{...rn,...Ls,...nr,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...In,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:n}){const{proxy:i}=de(),{$q:r}=i,s={};let o=NaN,a,l,c=null,u;const h=K(null),m=ir(t),{innerValue:f,hasMask:g,moveCursorForPaste:C,updateMaskValue:y,onMaskedKeydown:F,onMaskedClick:T}=Vs(t,e,D,h),$=Ms(t,!0),I=S(()=>Ct(f.value)),V=rr(z),N=Ln(),B=S(()=>t.type==="textarea"||t.autogrow===!0),Q=S(()=>B.value===!0||["text","search","url","tel","password"].includes(t.type)),b=S(()=>{const v={...N.splitAttrs.listeners.value,onInput:z,onPaste:U,onChange:H,onBlur:ie,onFocus:Re};return v.onCompositionstart=v.onCompositionupdate=v.onCompositionend=V,g.value===!0&&(v.onKeydown=F,v.onClick=T),t.autogrow===!0&&(v.onAnimationend=J),v}),k=S(()=>{const v={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:m.value,...N.splitAttrs.attributes.value,id:N.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return B.value===!1&&(v.type=t.type),t.autogrow===!0&&(v.rows=1),v});Z(()=>t.type,()=>{h.value&&(h.value.value=t.modelValue)}),Z(()=>t.modelValue,v=>{if(g.value===!0){if(l===!0&&(l=!1,String(v)===o))return;y(v)}else f.value!==v&&(f.value=v,t.type==="number"&&s.hasOwnProperty("value")===!0&&(a===!0?a=!1:delete s.value));t.autogrow===!0&&ae(w)}),Z(()=>t.autogrow,v=>{v===!0?ae(w):h.value!==null&&n.rows>0&&(h.value.style.height="auto")}),Z(()=>t.dense,()=>{t.autogrow===!0&&ae(w)});function R(){nn(()=>{const v=document.activeElement;h.value!==null&&h.value!==v&&(v===null||v.id!==N.targetUid.value)&&h.value.focus({preventScroll:!0})})}function x(){h.value!==null&&h.value.select()}function U(v){if(g.value===!0&&t.reverseFillMask!==!0){const j=v.target;C(j,j.selectionStart,j.selectionEnd)}e("paste",v)}function z(v){if(!v||!v.target)return;if(t.type==="file"){e("update:modelValue",v.target.files);return}const j=v.target.value;if(v.target.qComposing===!0){s.value=j;return}if(g.value===!0)y(j,!1,v.inputType);else if(D(j),Q.value===!0&&v.target===document.activeElement){const{selectionStart:G,selectionEnd:L}=v.target;G!==void 0&&L!==void 0&&ae(()=>{v.target===document.activeElement&&j.indexOf(v.target.value)===0&&v.target.setSelectionRange(G,L)})}t.autogrow===!0&&w()}function J(v){e("animationend",v),w()}function D(v,j){u=()=>{c=null,t.type!=="number"&&s.hasOwnProperty("value")===!0&&delete s.value,t.modelValue!==v&&o!==v&&(o=v,j===!0&&(l=!0),e("update:modelValue",v),ae(()=>{o===v&&(o=NaN)})),u=void 0},t.type==="number"&&(a=!0,s.value=v),t.debounce!==void 0?(c!==null&&clearTimeout(c),s.value=v,c=setTimeout(u,t.debounce)):u()}function w(){requestAnimationFrame(()=>{const v=h.value;if(v!==null){const j=v.parentNode.style,{scrollTop:G}=v,{overflowY:L,maxHeight:P}=r.platform.is.firefox===!0?{}:window.getComputedStyle(v),M=L!==void 0&&L!=="scroll";M===!0&&(v.style.overflowY="hidden"),j.marginBottom=v.scrollHeight-1+"px",v.style.height="1px",v.style.height=v.scrollHeight+"px",M===!0&&(v.style.overflowY=parseInt(P,10)<v.scrollHeight?"auto":"hidden"),j.marginBottom="",v.scrollTop=G}})}function H(v){V(v),c!==null&&(clearTimeout(c),c=null),u!==void 0&&u(),e("change",v.target.value)}function ie(v){v!==void 0&&Re(v),c!==null&&(clearTimeout(c),c=null),u!==void 0&&u(),a=!1,l=!1,delete s.value,t.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=f.value!==void 0?f.value:"")})}function p(){return s.hasOwnProperty("value")===!0?s.value:f.value!==void 0?f.value:""}ge(()=>{ie()}),At(()=>{t.autogrow===!0&&w()}),Object.assign(N,{innerValue:f,fieldClass:S(()=>`q-${B.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:S(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:h,emitValue:D,hasValue:I,floatingLabel:S(()=>I.value===!0&&(t.type!=="number"||isNaN(f.value)===!1)||Ct(t.displayValue)),getControl:()=>O(B.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...k.value,...b.value,...t.type!=="file"?{value:p()}:$.value}),getShadowControl:()=>O("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(B.value===!0?"":" text-no-wrap")},[O("span",{class:"invisible"},p()),O("span",t.shadowText)])});const _=Vn(N);return Object.assign(i,{focus:R,select:x,getNativeElement:()=>h.value}),qn(i,"nativeEl",()=>h.value),_}}),zs=Ce({name:"QField",inheritAttrs:!1,props:rn,emits:In,setup(){return Vn(Ln())}});const Hs={xs:8,sm:10,md:14,lg:20,xl:24};var Ns=Ce({name:"QChip",props:{...en,...ds,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:e,emit:n}){const{proxy:{$q:i}}=de(),r=tn(t,i),s=hs(t,Hs),o=S(()=>t.selected===!0||t.icon!==void 0),a=S(()=>t.selected===!0?t.iconSelected||i.iconSet.chip.selected:t.icon),l=S(()=>t.iconRemove||i.iconSet.chip.remove),c=S(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),u=S(()=>{const y=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(c.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),h=S(()=>{const y=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0},F={...y,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||i.lang.label.remove};return{chip:y,remove:F}});function m(y){y.keyCode===13&&f(y)}function f(y){t.disable||(n("update:selected",!t.selected),n("click",y))}function g(y){(y.keyCode===void 0||y.keyCode===13)&&(be(y),t.disable===!1&&(n("update:modelValue",!1),n("remove")))}function C(){const y=[];c.value===!0&&y.push(O("div",{class:"q-focus-helper"})),o.value===!0&&y.push(O(rt,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const F=t.label!==void 0?[O("div",{class:"ellipsis"},[t.label])]:void 0;return y.push(O("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Nr(e.default,F))),t.iconRight&&y.push(O(rt,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&y.push(O(rt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...h.value.remove,onClick:g,onKeyup:g})),y}return()=>{if(t.modelValue===!1)return;const y={class:u.value,style:s.value};return c.value===!0&&Object.assign(y,h.value.chip,{onClick:f,onKeyup:m}),Hr("div",y,C(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[fs,t.ripple]])}}}),Ks=Ce({name:"QItem",props:{...en,...vs,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:e,emit:n}){const{proxy:{$q:i}}=de(),r=tn(t,i),{hasLink:s,linkAttrs:o,linkClass:a,linkTag:l,navigateOnClick:c}=ms(),u=K(null),h=K(null),m=S(()=>t.clickable===!0||s.value===!0||t.tag==="label"),f=S(()=>t.disable!==!0&&m.value===!0),g=S(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(s.value===!0&&t.active===null?a.value:t.active===!0?` q-item--active${t.activeClass!==void 0?` ${t.activeClass}`:""}`:"")+(t.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),C=S(()=>{if(t.insetLevel===void 0)return null;const $=i.lang.rtl===!0?"Right":"Left";return{["padding"+$]:16+t.insetLevel*56+"px"}});function y($){f.value===!0&&(h.value!==null&&($.qKeyEvent!==!0&&document.activeElement===u.value?h.value.focus():document.activeElement===h.value&&u.value.focus()),c($))}function F($){if(f.value===!0&&Zt($,13)===!0){be($),$.qKeyEvent=!0;const I=new MouseEvent("click",$);I.qKeyEvent=!0,u.value.dispatchEvent(I)}n("keyup",$)}function T(){const $=Kr(e.default,[]);return f.value===!0&&$.unshift(O("div",{class:"q-focus-helper",tabindex:-1,ref:h})),$}return()=>{const $={ref:u,class:g.value,style:C.value,role:"listitem",onClick:y,onKeyup:F};return f.value===!0?($.tabindex=t.tabindex||"0",Object.assign($,o.value)):m.value===!0&&($["aria-disabled"]="true"),O(l.value,$,T())}}}),Ws=Ce({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:e}){const n=S(()=>`q-item__section column q-item__section--${t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main"}`+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>O("div",{class:n.value},Ee(e.default))}}),Js=Ce({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:e}){const n=S(()=>parseInt(t.lines,10)),i=S(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),r=S(()=>t.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>O("div",{style:r.value,class:i.value},Ee(e.default))}});function Gs(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),Xr.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Qs={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Ys({showing:t,avoidEmit:e,configureAnchorEl:n}){const{props:i,proxy:r,emit:s}=de(),o=K(null);let a=null;function l(f){return o.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const c={};n===void 0&&(Object.assign(c,{hide(f){r.hide(f)},toggle(f){r.toggle(f),f.qAnchorHandled=!0},toggleKey(f){Zt(f,13)===!0&&c.toggle(f)},contextClick(f){r.hide(f),ke(f),ae(()=>{r.show(f),f.qAnchorHandled=!0})},prevent:ke,mobileTouch(f){if(c.mobileCleanup(f),l(f)!==!0)return;r.hide(f),o.value.classList.add("non-selectable");const g=f.target;ri(c,"anchor",[[g,"touchmove","mobileCleanup","passive"],[g,"touchend","mobileCleanup","passive"],[g,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),a=setTimeout(()=>{a=null,r.show(f),f.qAnchorHandled=!0},300)},mobileCleanup(f){o.value.classList.remove("non-selectable"),a!==null&&(clearTimeout(a),a=null),t.value===!0&&f!==void 0&&Gs()}}),n=function(f=i.contextMenu){if(i.noParentEvent===!0||o.value===null)return;let g;f===!0?r.$q.platform.is.mobile===!0?g=[[o.value,"touchstart","mobileTouch","passive"]]:g=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:g=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],ri(c,"anchor",g)});function u(){Zr(c,"anchor")}function h(f){for(o.value=f;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;n()}function m(){if(i.target===!1||i.target===""||r.$el.parentNode===null)o.value=null;else if(i.target===!0)h(r.$el.parentNode);else{let f=i.target;if(typeof i.target=="string")try{f=document.querySelector(i.target)}catch{f=void 0}f!=null?(o.value=f.$el||f,n()):(o.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return Z(()=>i.contextMenu,f=>{o.value!==null&&(u(),n(f))}),Z(()=>i.target,()=>{o.value!==null&&u(),m()}),Z(()=>i.noParentEvent,f=>{o.value!==null&&(f===!0?u():n())}),At(()=>{m(),e!==!0&&i.modelValue===!0&&o.value===null&&s("update:modelValue",!1)}),ge(()=>{a!==null&&clearTimeout(a),u()}),{anchorEl:o,canShow:l,anchorEvents:c}}function Xs(t,e){const n=K(null);let i;function r(a,l){const c=`${l!==void 0?"add":"remove"}EventListener`,u=l!==void 0?l:i;a!==window&&a[c]("scroll",u,Se.passive),window[c]("scroll",u,Se.passive),i=l}function s(){n.value!==null&&(r(n.value),n.value=null)}const o=Z(()=>t.noParentEvent,()=>{n.value!==null&&(s(),e())});return ge(o),{localScrollTarget:n,unconfigureScrollTarget:s,changeScrollEvent:r}}const sr={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},or=["beforeShow","show","beforeHide","hide"];function ar({showing:t,canShow:e,hideOnRouteChange:n,handleShow:i,handleHide:r,processOnMount:s}){const o=de(),{props:a,emit:l,proxy:c}=o;let u;function h(T){t.value===!0?g(T):m(T)}function m(T){if(a.disable===!0||T!==void 0&&T.qAnchorHandled===!0||e!==void 0&&e(T)!==!0)return;const $=a["onUpdate:modelValue"]!==void 0;$===!0&&(l("update:modelValue",!0),u=T,ae(()=>{u===T&&(u=void 0)})),(a.modelValue===null||$===!1)&&f(T)}function f(T){t.value!==!0&&(t.value=!0,l("beforeShow",T),i!==void 0?i(T):l("show",T))}function g(T){if(a.disable===!0)return;const $=a["onUpdate:modelValue"]!==void 0;$===!0&&(l("update:modelValue",!1),u=T,ae(()=>{u===T&&(u=void 0)})),(a.modelValue===null||$===!1)&&C(T)}function C(T){t.value!==!1&&(t.value=!1,l("beforeHide",T),r!==void 0?r(T):l("hide",T))}function y(T){a.disable===!0&&T===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):T===!0!==t.value&&(T===!0?f:C)(u)}Z(()=>a.modelValue,y),n!==void 0&&gs(o)===!0&&Z(()=>c.$route.fullPath,()=>{n.value===!0&&t.value===!0&&g()}),s===!0&&At(()=>{y(a.modelValue)});const F={show:m,hide:g,toggle:h};return Object.assign(c,F),F}let Zs=1,eo=document.body;function to(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${Zs++}`:t,si.globalNodes!==void 0){const i=si.globalNodes.class;i!==void 0&&(n.className=i)}return eo.appendChild(n),n}function no(t){t.remove()}const wt=[];function io(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return fn(t)}else if(t.__qPortal===!0){const n=fn(t);return n!==void 0&&n.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=fn(t)}while(t!=null)}function ro(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function lr(t,e,n,i){const r=K(!1),s=K(!1);let o=null;const a={},l=i==="dialog"&&ro(t);function c(h){if(h===!0){hi(a),s.value=!0;return}s.value=!1,r.value===!1&&(l===!1&&o===null&&(o=to(!1,i)),r.value=!0,wt.push(t.proxy),js(a))}function u(h){if(s.value=!1,h!==!0)return;hi(a),r.value=!1;const m=wt.indexOf(t.proxy);m!==-1&&wt.splice(m,1),o!==null&&(no(o),o=null)}return es(()=>{u(!0)}),t.proxy.__qPortal=!0,qn(t.proxy,"contentEl",()=>e.value),{showPortal:c,hidePortal:u,portalIsActive:r,portalIsAccessible:s,renderPortal:()=>l===!0?n():r.value===!0?[O(ts,{to:o},n())]:void 0}}const ur={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function cr(t,e=()=>{},n=()=>{}){return{transitionProps:S(()=>{const i=`q-transition--${t.transitionShow||e()}`,r=`q-transition--${t.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${r}-leave-from`,leaveActiveClass:`${r}-leave-active`,leaveToClass:`${r}-leave-to`}}),transitionStyle:S(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}function dr(){let t;const e=de();function n(){t=void 0}return Xt(n),ge(n),{removeTick:n,registerTick(i){t=i,ae(()=>{t===i&&(Zi(e)===!1&&t(),t=void 0)})}}}function hr(){let t=null;const e=de();function n(){t!==null&&(clearTimeout(t),t=null)}return Xt(n),ge(n),{removeTimeout:n,registerTimeout(i,r){n(),Zi(e)===!1&&(t=setTimeout(i,r))}}}const ze=[];let ot;function so(t){ot=t.keyCode===27}function oo(){ot===!0&&(ot=!1)}function ao(t){ot===!0&&(ot=!1,Zt(t,27)===!0&&ze[ze.length-1](t))}function fr(t){window[t]("keydown",so),window[t]("blur",oo),window[t]("keyup",ao),ot=!1}function vr(t){xe.is.desktop===!0&&(ze.push(t),ze.length===1&&fr("addEventListener"))}function Jt(t){const e=ze.indexOf(t);e>-1&&(ze.splice(e,1),ze.length===0&&fr("removeEventListener"))}const He=[];function mr(t){He[He.length-1](t)}function gr(t){xe.is.desktop===!0&&(He.push(t),He.length===1&&document.body.addEventListener("focusin",mr))}function On(t){const e=He.indexOf(t);e>-1&&(He.splice(e,1),He.length===0&&document.body.removeEventListener("focusin",mr))}const{notPassiveCapture:Gt}=Se,Ne=[];function Qt(t){const e=t.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let n=wt.length-1;for(;n>=0;){const i=wt[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=Ne.length-1;i>=0;i--){const r=Ne[i];if((r.anchorEl.value===null||r.anchorEl.value.contains(e)===!1)&&(e===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(e)===!1))t.qClickOutside=!0,r.onClickOutside(t);else return}}function lo(t){Ne.push(t),Ne.length===1&&(document.addEventListener("mousedown",Qt,Gt),document.addEventListener("touchstart",Qt,Gt))}function mi(t){const e=Ne.findIndex(n=>n===t);e>-1&&(Ne.splice(e,1),Ne.length===0&&(document.removeEventListener("mousedown",Qt,Gt),document.removeEventListener("touchstart",Qt,Gt)))}let gi,pi;function yi(t){const e=t.split(" ");return e.length!==2?!1:["top","center","bottom"].includes(e[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(e[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function uo(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const An={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{An[`${t}#ltr`]=t,An[`${t}#rtl`]=t});function bi(t,e){const n=t.split(" ");return{vertical:n[0],horizontal:An[`${n[1]}#${e===!0?"rtl":"ltr"}`]}}function co(t,e){let{top:n,left:i,right:r,bottom:s,width:o,height:a}=t.getBoundingClientRect();return e!==void 0&&(n-=e[1],i-=e[0],s+=e[1],r+=e[0],o+=e[0],a+=e[1]),{top:n,bottom:s,height:a,left:i,right:r,width:o,middle:i+(r-i)/2,center:n+(s-n)/2}}function ho(t,e,n){let{top:i,left:r}=t.getBoundingClientRect();return i+=e.top,r+=e.left,n!==void 0&&(i+=n[1],r+=n[0]),{top:i,bottom:i+1,height:1,left:r,right:r+1,width:1,middle:r,center:i}}function fo(t,e){return{top:0,center:e/2,bottom:e,left:0,middle:t/2,right:t}}function wi(t,e,n,i){return{top:t[n.vertical]-e[i.vertical],left:t[n.horizontal]-e[i.horizontal]}}function pr(t,e=0){if(t.targetEl===null||t.anchorEl===null||e>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{pr(t,e+1)},10);return}const{targetEl:n,offset:i,anchorEl:r,anchorOrigin:s,selfOrigin:o,absoluteOffset:a,fit:l,cover:c,maxHeight:u,maxWidth:h}=t;if(xe.is.ios===!0&&window.visualViewport!==void 0){const N=document.body.style,{offsetLeft:B,offsetTop:Q}=window.visualViewport;B!==gi&&(N.setProperty("--q-pe-left",B+"px"),gi=B),Q!==pi&&(N.setProperty("--q-pe-top",Q+"px"),pi=Q)}const{scrollLeft:m,scrollTop:f}=n,g=a===void 0?co(r,c===!0?[0,0]:i):ho(r,a,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h||"100vw",maxHeight:u||"100vh",visibility:"visible"});const{offsetWidth:C,offsetHeight:y}=n,{elWidth:F,elHeight:T}=l===!0||c===!0?{elWidth:Math.max(g.width,C),elHeight:c===!0?Math.max(g.height,y):y}:{elWidth:C,elHeight:y};let $={maxWidth:h,maxHeight:u};(l===!0||c===!0)&&($.minWidth=g.width+"px",c===!0&&($.minHeight=g.height+"px")),Object.assign(n.style,$);const I=fo(F,T);let V=wi(g,I,s,o);if(a===void 0||i===void 0)gn(V,g,I,s,o);else{const{top:N,left:B}=V;gn(V,g,I,s,o);let Q=!1;if(V.top!==N){Q=!0;const b=2*i[1];g.center=g.top-=b,g.bottom-=b+2}if(V.left!==B){Q=!0;const b=2*i[0];g.middle=g.left-=b,g.right-=b+2}Q===!0&&(V=wi(g,I,s,o),gn(V,g,I,s,o))}$={top:V.top+"px",left:V.left+"px"},V.maxHeight!==void 0&&($.maxHeight=V.maxHeight+"px",g.height>V.maxHeight&&($.minHeight=$.maxHeight)),V.maxWidth!==void 0&&($.maxWidth=V.maxWidth+"px",g.width>V.maxWidth&&($.minWidth=$.maxWidth)),Object.assign(n.style,$),n.scrollTop!==f&&(n.scrollTop=f),n.scrollLeft!==m&&(n.scrollLeft=m)}function gn(t,e,n,i,r){const s=n.bottom,o=n.right,a=ys(),l=window.innerHeight-a,c=document.body.clientWidth;if(t.top<0||t.top+s>l)if(r.vertical==="center")t.top=e[i.vertical]>l/2?Math.max(0,l-s):0,t.maxHeight=Math.min(s,l);else if(e[i.vertical]>l/2){const u=Math.min(l,i.vertical==="center"?e.center:i.vertical===r.vertical?e.bottom:e.top);t.maxHeight=Math.min(s,u),t.top=Math.max(0,u-s)}else t.top=Math.max(0,i.vertical==="center"?e.center:i.vertical===r.vertical?e.top:e.bottom),t.maxHeight=Math.min(s,l-t.top);if(t.left<0||t.left+o>c)if(t.maxWidth=Math.min(o,c),r.horizontal==="middle")t.left=e[i.horizontal]>c/2?Math.max(0,c-o):0;else if(e[i.horizontal]>c/2){const u=Math.min(c,i.horizontal==="middle"?e.middle:i.horizontal===r.horizontal?e.right:e.left);t.maxWidth=Math.min(o,u),t.left=Math.max(0,u-t.maxWidth)}else t.left=Math.max(0,i.horizontal==="middle"?e.middle:i.horizontal===r.horizontal?e.left:e.right),t.maxWidth=Math.min(o,c-t.left)}var vo=Ce({name:"QMenu",inheritAttrs:!1,props:{...Qs,...sr,...en,...ur,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:yi},self:{type:String,validator:yi},offset:{type:Array,validator:uo},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...or,"click","escapeKey"],setup(t,{slots:e,emit:n,attrs:i}){let r=null,s,o,a;const l=de(),{proxy:c}=l,{$q:u}=c,h=K(null),m=K(!1),f=S(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),g=tn(t,u),{registerTick:C,removeTick:y}=dr(),{registerTimeout:F}=hr(),{transitionProps:T,transitionStyle:$}=cr(t),{localScrollTarget:I,changeScrollEvent:V,unconfigureScrollTarget:N}=Xs(t,j),{anchorEl:B,canShow:Q}=Ys({showing:m}),{hide:b}=ar({showing:m,canShow:Q,handleShow:p,handleHide:_,hideOnRouteChange:f,processOnMount:!0}),{showPortal:k,hidePortal:R,renderPortal:x}=lr(l,h,re,"menu"),U={anchorEl:B,innerRef:h,onClickOutside(E){if(t.persistent!==!0&&m.value===!0)return b(E),(E.type==="touchstart"||E.target.classList.contains("q-dialog__backdrop"))&&be(E),!0}},z=S(()=>bi(t.anchor||(t.cover===!0?"center middle":"bottom start"),u.lang.rtl)),J=S(()=>t.cover===!0?z.value:bi(t.self||"top start",u.lang.rtl)),D=S(()=>(t.square===!0?" q-menu--square":"")+(g.value===!0?" q-menu--dark q-dark":"")),w=S(()=>t.autoClose===!0?{onClick:G}:{}),H=S(()=>m.value===!0&&t.persistent!==!0);Z(H,E=>{E===!0?(vr(P),lo(U)):(Jt(P),mi(U))});function ie(){nn(()=>{let E=h.value;E&&E.contains(document.activeElement)!==!0&&(E=E.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||E.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||E.querySelector("[autofocus], [data-autofocus]")||E,E.focus({preventScroll:!0}))})}function p(E){if(r=t.noRefocus===!1?document.activeElement:null,gr(L),k(),j(),s=void 0,E!==void 0&&(t.touchPosition||t.contextMenu)){const le=ns(E);if(le.left!==void 0){const{top:Oe,left:qe}=B.value.getBoundingClientRect();s={left:le.left-qe,top:le.top-Oe}}}o===void 0&&(o=Z(()=>u.screen.width+"|"+u.screen.height+"|"+t.self+"|"+t.anchor+"|"+u.lang.rtl,M)),t.noFocus!==!0&&document.activeElement.blur(),C(()=>{M(),t.noFocus!==!0&&ie()}),F(()=>{u.platform.is.ios===!0&&(a=t.autoClose,h.value.click()),M(),k(!0),n("show",E)},t.transitionDuration)}function _(E){y(),R(),v(!0),r!==null&&(E===void 0||E.qClickOutside!==!0)&&(((E&&E.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),F(()=>{R(!0),n("hide",E)},t.transitionDuration)}function v(E){s=void 0,o!==void 0&&(o(),o=void 0),(E===!0||m.value===!0)&&(On(L),N(),mi(U),Jt(P)),E!==!0&&(r=null)}function j(){(B.value!==null||t.scrollTarget!==void 0)&&(I.value=bs(B.value,t.scrollTarget),V(I.value,M))}function G(E){a!==!0?(io(c,E),n("click",E)):a=!1}function L(E){H.value===!0&&t.noFocus!==!0&&Ki(h.value,E.target)!==!0&&ie()}function P(E){n("escapeKey"),b(E)}function M(){pr({targetEl:h.value,offset:t.offset,anchorEl:B.value,anchorOrigin:z.value,selfOrigin:J.value,absoluteOffset:s,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function re(){return O(Kt,T.value,()=>m.value===!0?O("div",{role:"menu",...i,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+D.value,i.class],style:[i.style,$.value],...w.value},Ee(e.default)):null)}return ge(v),Object.assign(c,{focus:ie,updatePosition:M}),x}});function mo(t,e,n){let i;function r(){i!==void 0&&(oi.remove(i),i=void 0)}return ge(()=>{t.value===!0&&r()}),{removeFromHistory:r,addToHistory(){i={condition:()=>n.value===!0,handler:e},oi.add(i)}}}let ht=0,pn,yn,pt,bn=!1,_i,Si,ki,Me=null;function go(t){po(t)&&be(t)}function po(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=is(t),n=t.shiftKey&&!t.deltaX,i=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),r=n||i?t.deltaY:t.deltaX;for(let s=0;s<e.length;s++){const o=e[s];if(Ss(o,i))return i?r<0&&o.scrollTop===0?!0:r>0&&o.scrollTop+o.clientHeight===o.scrollHeight:r<0&&o.scrollLeft===0?!0:r>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function xi(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Bt(t){bn!==!0&&(bn=!0,requestAnimationFrame(()=>{bn=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(pt===void 0||e!==window.innerHeight)&&(pt=n-e,document.scrollingElement.scrollTop=i),i>pt&&(document.scrollingElement.scrollTop-=Math.ceil((i-pt)/8))}))}function Ci(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:i,overflowX:r}=window.getComputedStyle(e);pn=ws(window),yn=_s(window),_i=e.style.left,Si=e.style.top,ki=window.location.href,e.style.left=`-${pn}px`,e.style.top=`-${yn}px`,r!=="hidden"&&(r==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,xe.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Bt,Se.passiveCapture),window.visualViewport.addEventListener("scroll",Bt,Se.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",xi,Se.passiveCapture))}xe.is.desktop===!0&&xe.is.mac===!0&&window[`${t}EventListener`]("wheel",go,Se.notPassive),t==="remove"&&(xe.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Bt,Se.passiveCapture),window.visualViewport.removeEventListener("scroll",Bt,Se.passiveCapture)):window.removeEventListener("scroll",xi,Se.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=_i,e.style.top=Si,window.location.href===ki&&window.scrollTo(pn,yn),pt=void 0)}function yo(t){let e="add";if(t===!0){if(ht++,Me!==null){clearTimeout(Me),Me=null;return}if(ht>1)return}else{if(ht===0||(ht--,ht>0))return;if(e="remove",xe.is.ios===!0&&xe.is.nativeMobile===!0){Me!==null&&clearTimeout(Me),Me=setTimeout(()=>{Ci(e),Me=null},100);return}}Ci(e)}function bo(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,yo(e))}}}let Ut=0;const wo={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Ti={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var _o=Ce({name:"QDialog",inheritAttrs:!1,props:{...sr,...ur,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:t=>t==="standard"||["top","bottom","left","right"].includes(t)}},emits:[...or,"shake","click","escapeKey"],setup(t,{slots:e,emit:n,attrs:i}){const r=de(),s=K(null),o=K(!1),a=K(!1);let l=null,c=null,u,h;const m=S(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:f}=bo(),{registerTimeout:g}=hr(),{registerTick:C,removeTick:y}=dr(),{transitionProps:F,transitionStyle:T}=cr(t,()=>Ti[t.position][0],()=>Ti[t.position][1]),{showPortal:$,hidePortal:I,portalIsAccessible:V,renderPortal:N}=lr(r,s,G,"dialog"),{hide:B}=ar({showing:o,hideOnRouteChange:m,handleShow:z,handleHide:J,processOnMount:!0}),{addToHistory:Q,removeFromHistory:b}=mo(o,B,m),k=S(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${wo[t.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),R=S(()=>o.value===!0&&t.seamless!==!0),x=S(()=>t.autoClose===!0?{onClick:_}:{}),U=S(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${R.value===!0?"modal":"seamless"}`,i.class]);Z(()=>t.maximized,L=>{o.value===!0&&p(L)}),Z(R,L=>{f(L),L===!0?(gr(j),vr(H)):(On(j),Jt(H))});function z(L){Q(),c=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,p(t.maximized),$(),a.value=!0,t.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),C(D)):y(),g(()=>{if(r.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:P,bottom:M}=document.activeElement.getBoundingClientRect(),{innerHeight:re}=window,E=window.visualViewport!==void 0?window.visualViewport.height:re;P>0&&M>E/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-E,M>=re?1/0:Math.ceil(document.scrollingElement.scrollTop+M-E/2))),document.activeElement.scrollIntoView()}h=!0,s.value.click(),h=!1}$(!0),a.value=!1,n("show",L)},t.transitionDuration)}function J(L){y(),b(),ie(!0),a.value=!0,I(),c!==null&&(((L&&L.type.indexOf("key")===0?c.closest('[tabindex]:not([tabindex^="-"])'):void 0)||c).focus(),c=null),g(()=>{I(!0),a.value=!1,n("hide",L)},t.transitionDuration)}function D(L){nn(()=>{let P=s.value;P===null||P.contains(document.activeElement)===!0||(P=(L!==""?P.querySelector(L):null)||P.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||P.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||P.querySelector("[autofocus], [data-autofocus]")||P,P.focus({preventScroll:!0}))})}function w(L){L&&typeof L.focus=="function"?L.focus({preventScroll:!0}):D(),n("shake");const P=s.value;P!==null&&(P.classList.remove("q-animate--scale"),P.classList.add("q-animate--scale"),l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,s.value!==null&&(P.classList.remove("q-animate--scale"),D())},170))}function H(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&w():(n("escapeKey"),B()))}function ie(L){l!==null&&(clearTimeout(l),l=null),(L===!0||o.value===!0)&&(p(!1),t.seamless!==!0&&(f(!1),On(j),Jt(H))),L!==!0&&(c=null)}function p(L){L===!0?u!==!0&&(Ut<1&&document.body.classList.add("q-body--dialog"),Ut++,u=!0):u===!0&&(Ut<2&&document.body.classList.remove("q-body--dialog"),Ut--,u=!1)}function _(L){h!==!0&&(B(L),n("click",L))}function v(L){t.persistent!==!0&&t.noBackdropDismiss!==!0?B(L):t.noShake!==!0&&w()}function j(L){t.allowFocusOutside!==!0&&V.value===!0&&Ki(s.value,L.target)!==!0&&D('[tabindex]:not([tabindex="-1"])')}Object.assign(r.proxy,{focus:D,shake:w,__updateRefocusTarget(L){c=L||null}}),ge(ie);function G(){return O("div",{role:"dialog","aria-modal":R.value===!0?"true":"false",...i,class:U.value},[O(Kt,{name:"q-transition--fade",appear:!0},()=>R.value===!0?O("div",{class:"q-dialog__backdrop fixed-full",style:T.value,"aria-hidden":"true",tabindex:-1,onClick:v}):null),O(Kt,F.value,()=>o.value===!0?O("div",{ref:s,class:k.value,style:T.value,tabindex:-1,...x.value},Ee(e.default)):null)])}return N}});let Yt=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(e),t.scrollLeft=-1e3,Yt=t.scrollLeft>=0,t.remove()}const we=1e3,So=["start","center","end","start-force","center-force","end-force"],yr=Array.prototype.filter,ko=window.getComputedStyle(document.body).overflowAnchor===void 0?rs:function(t,e){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const n=t.children||[];yr.call(n,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const i=n[e];i&&i.dataset&&(i.dataset.qVsAnchor="")}))};function st(t,e){return t+e}function wn(t,e,n,i,r,s,o,a){const l=t===window?document.scrollingElement||document.documentElement:t,c=r===!0?"offsetWidth":"offsetHeight",u={scrollStart:0,scrollViewSize:-o-a,scrollMaxSize:0,offsetStart:-o,offsetEnd:-a};if(r===!0?(t===window?(u.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,u.scrollViewSize+=document.documentElement.clientWidth):(u.scrollStart=l.scrollLeft,u.scrollViewSize+=l.clientWidth),u.scrollMaxSize=l.scrollWidth,s===!0&&(u.scrollStart=(Yt===!0?u.scrollMaxSize-u.scrollViewSize:0)-u.scrollStart)):(t===window?(u.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,u.scrollViewSize+=document.documentElement.clientHeight):(u.scrollStart=l.scrollTop,u.scrollViewSize+=l.clientHeight),u.scrollMaxSize=l.scrollHeight),n!==null)for(let h=n.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetStart+=h[c]);if(i!==null)for(let h=i.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetEnd+=h[c]);if(e!==t){const h=l.getBoundingClientRect(),m=e.getBoundingClientRect();r===!0?(u.offsetStart+=m.left-h.left,u.offsetEnd-=m.width):(u.offsetStart+=m.top-h.top,u.offsetEnd-=m.height),t!==window&&(u.offsetStart+=u.scrollStart),u.offsetEnd+=u.scrollMaxSize-u.offsetStart}return u}function Ei(t,e,n,i){e==="end"&&(e=(t===window?document.body:t)[n===!0?"scrollWidth":"scrollHeight"]),t===window?n===!0?(i===!0&&(e=(Yt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):n===!0?(i===!0&&(e=(Yt===!0?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function ft(t,e,n,i){if(n>=i)return 0;const r=e.length,s=Math.floor(n/we),o=Math.floor((i-1)/we)+1;let a=t.slice(s,o).reduce(st,0);return n%we!==0&&(a-=e.slice(s*we,n).reduce(st,0)),i%we!==0&&i!==r&&(a-=e.slice(i,o*we).reduce(st,0)),a}const xo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Co={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...xo};function To({virtualScrollLength:t,getVirtualScrollTarget:e,getVirtualScrollEl:n,virtualScrollItemSizeComputed:i}){const r=de(),{props:s,emit:o,proxy:a}=r,{$q:l}=a;let c,u,h,m=[],f;const g=K(0),C=K(0),y=K({}),F=K(null),T=K(null),$=K(null),I=K({from:0,to:0}),V=S(()=>s.tableColspan!==void 0?s.tableColspan:100);i===void 0&&(i=S(()=>s.virtualScrollItemSize));const N=S(()=>i.value+";"+s.virtualScrollHorizontal),B=S(()=>N.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);Z(B,()=>{D()}),Z(N,Q);function Q(){J(u,!0)}function b(_){J(_===void 0?u:_)}function k(_,v){const j=e();if(j==null||j.nodeType===8)return;const G=wn(j,n(),F.value,T.value,s.virtualScrollHorizontal,l.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);h!==G.scrollViewSize&&D(G.scrollViewSize),x(j,G,Math.min(t.value-1,Math.max(0,parseInt(_,10)||0)),0,So.indexOf(v)>-1?v:u>-1&&_>u?"end":"start")}function R(){const _=e();if(_==null||_.nodeType===8)return;const v=wn(_,n(),F.value,T.value,s.virtualScrollHorizontal,l.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),j=t.value-1,G=v.scrollMaxSize-v.offsetStart-v.offsetEnd-C.value;if(c===v.scrollStart)return;if(v.scrollMaxSize<=0){x(_,v,0,0);return}h!==v.scrollViewSize&&D(v.scrollViewSize),U(I.value.from);const L=Math.floor(v.scrollMaxSize-Math.max(v.scrollViewSize,v.offsetEnd)-Math.min(f[j],v.scrollViewSize/2));if(L>0&&Math.ceil(v.scrollStart)>=L){x(_,v,j,v.scrollMaxSize-v.offsetEnd-m.reduce(st,0));return}let P=0,M=v.scrollStart-v.offsetStart,re=M;if(M<=G&&M+v.scrollViewSize>=g.value)M-=g.value,P=I.value.from,re=M;else for(let E=0;M>=m[E]&&P<j;E++)M-=m[E],P+=we;for(;M>0&&P<j;)M-=f[P],M>-v.scrollViewSize?(P++,re=M):re=f[P]+M;x(_,v,P,re)}function x(_,v,j,G,L){const P=typeof L=="string"&&L.indexOf("-force")>-1,M=P===!0?L.replace("-force",""):L,re=M!==void 0?M:"start";let E=Math.max(0,j-y.value[re]),le=E+y.value.total;le>t.value&&(le=t.value,E=Math.max(0,le-y.value.total)),c=v.scrollStart;const Oe=E!==I.value.from||le!==I.value.to;if(Oe===!1&&M===void 0){H(j);return}const{activeElement:qe}=document,_e=$.value;Oe===!0&&_e!==null&&_e!==qe&&_e.contains(qe)===!0&&(_e.addEventListener("focusout",z),setTimeout(()=>{_e!==null&&_e.removeEventListener("focusout",z)})),ko(_e,j-E);const Pt=M!==void 0?f.slice(E,j).reduce(st,0):0;if(Oe===!0){const Ie=le>=I.value.from&&E<=I.value.to?I.value.to:le;I.value={from:E,to:Ie},g.value=ft(m,f,0,E),C.value=ft(m,f,le,t.value),requestAnimationFrame(()=>{I.value.to!==le&&c===v.scrollStart&&(I.value={from:I.value.from,to:le},C.value=ft(m,f,le,t.value))})}requestAnimationFrame(()=>{if(c!==v.scrollStart)return;Oe===!0&&U(E);const Ie=f.slice(E,j).reduce(st,0),Ke=Ie+v.offsetStart+g.value,jt=Ke+f[j];let ut=Ke+G;if(M!==void 0){const an=Ie-Pt,fe=v.scrollStart+an;ut=P!==!0&&fe<Ke&&jt<fe+v.scrollViewSize?fe:M==="end"?jt-v.scrollViewSize:Ke-(M==="start"?0:Math.round((v.scrollViewSize-f[j])/2))}c=ut,Ei(_,ut,s.virtualScrollHorizontal,l.lang.rtl),H(j)})}function U(_){const v=$.value;if(v){const j=yr.call(v.children,E=>E.classList&&E.classList.contains("q-virtual-scroll--skip")===!1),G=j.length,L=s.virtualScrollHorizontal===!0?E=>E.getBoundingClientRect().width:E=>E.offsetHeight;let P=_,M,re;for(let E=0;E<G;){for(M=L(j[E]),E++;E<G&&j[E].classList.contains("q-virtual-scroll--with-prev")===!0;)M+=L(j[E]),E++;re=M-f[P],re!==0&&(f[P]+=re,m[Math.floor(P/we)]+=re),P++}}}function z(){$.value!==null&&$.value!==void 0&&$.value.focus()}function J(_,v){const j=1*i.value;(v===!0||Array.isArray(f)===!1)&&(f=[]);const G=f.length;f.length=t.value;for(let P=t.value-1;P>=G;P--)f[P]=j;const L=Math.floor((t.value-1)/we);m=[];for(let P=0;P<=L;P++){let M=0;const re=Math.min((P+1)*we,t.value);for(let E=P*we;E<re;E++)M+=f[E];m.push(M)}u=-1,c=void 0,g.value=ft(m,f,0,I.value.from),C.value=ft(m,f,I.value.to,t.value),_>=0?(U(I.value.from),ae(()=>{k(_)})):ie()}function D(_){if(_===void 0&&typeof window!="undefined"){const M=e();M!=null&&M.nodeType!==8&&(_=wn(M,n(),F.value,T.value,s.virtualScrollHorizontal,l.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}h=_;const v=parseFloat(s.virtualScrollSliceRatioBefore)||0,j=parseFloat(s.virtualScrollSliceRatioAfter)||0,G=1+v+j,L=_===void 0||_<=0?1:Math.ceil(_/i.value),P=Math.max(1,L,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/G));y.value={total:Math.ceil(P*G),start:Math.ceil(P*v),center:Math.ceil(P*(.5+v)),end:Math.ceil(P*(1+v)),view:L}}function w(_,v){const j=s.virtualScrollHorizontal===!0?"width":"height",G={["--q-virtual-scroll-item-"+j]:i.value+"px"};return[_==="tbody"?O(_,{class:"q-virtual-scroll__padding",key:"before",ref:F},[O("tr",[O("td",{style:{[j]:`${g.value}px`,...G},colspan:V.value})])]):O(_,{class:"q-virtual-scroll__padding",key:"before",ref:F,style:{[j]:`${g.value}px`,...G}}),O(_,{class:"q-virtual-scroll__content",key:"content",ref:$,tabindex:-1},v.flat()),_==="tbody"?O(_,{class:"q-virtual-scroll__padding",key:"after",ref:T},[O("tr",[O("td",{style:{[j]:`${C.value}px`,...G},colspan:V.value})])]):O(_,{class:"q-virtual-scroll__padding",key:"after",ref:T,style:{[j]:`${C.value}px`,...G}})]}function H(_){u!==_&&(s.onVirtualScroll!==void 0&&o("virtualScroll",{index:_,from:I.value.from,to:I.value.to-1,direction:_<u?"decrease":"increase",ref:a}),u=_)}D();const ie=Wi(R,l.platform.is.ios===!0?120:35);ss(()=>{D()});let p=!1;return Xt(()=>{p=!0}),Gi(()=>{if(p!==!0)return;const _=e();c!==void 0&&_!==void 0&&_!==null&&_.nodeType!==8?Ei(_,c,s.virtualScrollHorizontal,l.lang.rtl):k(u)}),ge(()=>{ie.cancel()}),Object.assign(a,{scrollTo:k,reset:Q,refresh:b}),{virtualScrollSliceRange:I,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:D,onVirtualScrollEvt:ie,localResetVirtualScroll:J,padVirtualScroll:w,scrollTo:k,reset:Q,refresh:b}}function Oi(t,e,n){if(n<=e)return e;const i=n-e+1;let r=e+(t-e)%i;return r<e&&(r=i+r),r===0?0:r}const Ai=t=>["add","add-unique","toggle"].includes(t),Eo=".*+?^${}()|[]\\",Oo=Object.keys(rn);var $i=Ce({name:"QSelect",inheritAttrs:!1,props:{...Co,...nr,...rn,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ai},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...In,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(t,{slots:e,emit:n}){const{proxy:i}=de(),{$q:r}=i,s=K(!1),o=K(!1),a=K(-1),l=K(""),c=K(!1),u=K(!1);let h=null,m,f,g,C=null,y,F,T,$;const I=K(null),V=K(null),N=K(null),B=K(null),Q=K(null),b=ir(t),k=rr(Zn),R=S(()=>Array.isArray(t.options)?t.options.length:0),x=S(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:U,virtualScrollSliceSizeComputed:z,localResetVirtualScroll:J,padVirtualScroll:D,onVirtualScrollEvt:w,scrollTo:H,setVirtualScrollSize:ie}=To({virtualScrollLength:R,getVirtualScrollTarget:Rr,getVirtualScrollEl:Yn,virtualScrollItemSizeComputed:x}),p=Ln(),_=S(()=>{const d=t.mapOptions===!0&&t.multiple!==!0,q=t.modelValue!==void 0&&(t.modelValue!==null||d===!0)?t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue]:[];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const A=t.mapOptions===!0&&m!==void 0?m:[],W=q.map(te=>$r(te,A));return t.modelValue===null&&d===!0?W.filter(te=>te!==null):W}return q}),v=S(()=>{const d={};return Oo.forEach(q=>{const A=t[q];A!==void 0&&(d[q]=A)}),d}),j=S(()=>t.optionsDark===null?p.isDark.value:t.optionsDark),G=S(()=>Ct(_.value)),L=S(()=>{let d="q-field__input q-placeholder col";return t.hideSelected===!0||_.value.length===0?[d,t.inputClass]:(d+=" q-field__input--padding",t.inputClass===void 0?d:[d,t.inputClass])}),P=S(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),M=S(()=>R.value===0),re=S(()=>_.value.map(d=>ve.value(d)).join(", ")),E=S(()=>t.displayValue!==void 0?t.displayValue:re.value),le=S(()=>t.optionsHtml===!0?()=>!0:d=>d!=null&&d.html===!0),Oe=S(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||_.value.some(le.value))),qe=S(()=>p.focused.value===!0?t.tabindex:-1),_e=S(()=>{const d={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return a.value>=0&&(d["aria-activedescendant"]=`${p.targetUid.value}_${a.value}`),d}),Pt=S(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Ie=S(()=>_.value.map((d,q)=>({index:q,opt:d,html:le.value(d),selected:!0,removeAtIndex:Ar,toggleOption:Le,tabindex:qe.value}))),Ke=S(()=>{if(R.value===0)return[];const{from:d,to:q}=U.value;return t.options.slice(d,q).map((A,W)=>{const te=We.value(A)===!0,ee=d+W,se={clickable:!0,active:!1,activeClass:an.value,manualFocus:!0,focused:!1,disable:te,tabindex:-1,dense:t.optionsDense,dark:j.value,role:"option",id:`${p.targetUid.value}_${ee}`,onClick:()=>{Le(A)}};return te!==!0&&(cn(A)===!0&&(se.active=!0),a.value===ee&&(se.focused=!0),se["aria-selected"]=se.active===!0?"true":"false",r.platform.is.desktop===!0&&(se.onMousemove=()=>{s.value===!0&&Je(ee)})),{index:ee,opt:A,html:le.value(A),label:ve.value(A),selected:se.active,focused:se.focused,toggleOption:Le,setOptionIndex:Je,itemProps:se}})}),jt=S(()=>t.dropdownIcon!==void 0?t.dropdownIcon:r.iconSet.arrow.dropdown),ut=S(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),an=S(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),fe=S(()=>un(t.optionValue,"value")),ve=S(()=>un(t.optionLabel,"label")),We=S(()=>un(t.optionDisable,"disable")),qt=S(()=>_.value.map(d=>fe.value(d))),Or=S(()=>{const d={onInput:Zn,onChange:k,onKeydown:Qn,onKeyup:Jn,onKeypress:Gn,onFocus:Kn,onClick(q){f===!0&&Re(q)}};return d.onCompositionstart=d.onCompositionupdate=d.onCompositionend=k,d});Z(_,d=>{m=d,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&p.innerLoading.value!==!0&&(o.value!==!0&&s.value!==!0||G.value!==!0)&&(g!==!0&&Xe(),(o.value===!0||s.value===!0)&&Ge(""))},{immediate:!0}),Z(()=>t.fillInput,Xe),Z(s,dn),Z(R,zr);function Hn(d){return t.emitValue===!0?fe.value(d):d}function ln(d){if(d>-1&&d<_.value.length)if(t.multiple===!0){const q=t.modelValue.slice();n("remove",{index:d,value:q.splice(d,1)[0]}),n("update:modelValue",q)}else n("update:modelValue",null)}function Ar(d){ln(d),p.focus()}function Nn(d,q){const A=Hn(d);if(t.multiple!==!0){t.fillInput===!0&&ct(ve.value(d),!0,!0),n("update:modelValue",A);return}if(_.value.length===0){n("add",{index:0,value:A}),n("update:modelValue",t.multiple===!0?[A]:A);return}if(q===!0&&cn(d)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const W=t.modelValue.slice();n("add",{index:W.length,value:A}),W.push(A),n("update:modelValue",W)}function Le(d,q){if(p.editable.value!==!0||d===void 0||We.value(d)===!0)return;const A=fe.value(d);if(t.multiple!==!0){q!==!0&&(ct(t.fillInput===!0?ve.value(d):"",!0,!0),Ve()),V.value!==null&&V.value.focus(),(_.value.length===0||dt(fe.value(_.value[0]),A)!==!0)&&n("update:modelValue",t.emitValue===!0?A:d);return}if((f!==!0||c.value===!0)&&p.focus(),Kn(),_.value.length===0){const ee=t.emitValue===!0?A:d;n("add",{index:0,value:ee}),n("update:modelValue",t.multiple===!0?[ee]:ee);return}const W=t.modelValue.slice(),te=qt.value.findIndex(ee=>dt(ee,A));if(te>-1)n("remove",{index:te,value:W.splice(te,1)[0]});else{if(t.maxValues!==void 0&&W.length>=t.maxValues)return;const ee=t.emitValue===!0?A:d;n("add",{index:W.length,value:ee}),W.push(ee)}n("update:modelValue",W)}function Je(d){if(r.platform.is.desktop!==!0)return;const q=d>-1&&d<R.value?d:-1;a.value!==q&&(a.value=q)}function It(d=1,q){if(s.value===!0){let A=a.value;do A=Oi(A+d,-1,R.value-1);while(A!==-1&&A!==a.value&&We.value(t.options[A])===!0);a.value!==A&&(Je(A),H(A),q!==!0&&t.useInput===!0&&t.fillInput===!0&&Lt(A>=0?ve.value(t.options[A]):y))}}function $r(d,q){const A=W=>dt(fe.value(W),d);return t.options.find(A)||q.find(A)||d}function un(d,q){const A=d!==void 0?d:q;return typeof A=="function"?A:W=>W!==null&&typeof W=="object"&&A in W?W[A]:W}function cn(d){const q=fe.value(d);return qt.value.find(A=>dt(A,q))!==void 0}function Kn(d){t.useInput===!0&&V.value!==null&&(d===void 0||V.value===d.target&&d.target.value===re.value)&&V.value.select()}function Wn(d){Zt(d,27)===!0&&s.value===!0&&(Re(d),Ve(),Xe()),n("keyup",d)}function Jn(d){const{value:q}=d.target;if(d.keyCode!==void 0){Wn(d);return}if(d.target.value="",h!==null&&(clearTimeout(h),h=null),Xe(),typeof q=="string"&&q.length!==0){const A=q.toLocaleLowerCase(),W=ee=>{const se=t.options.find(he=>ee.value(he).toLocaleLowerCase()===A);return se===void 0?!1:(_.value.indexOf(se)===-1?Le(se):Ve(),!0)},te=ee=>{W(fe)!==!0&&(W(ve)===!0||ee===!0||Ge(q,!0,()=>te(!0)))};te()}else p.clearValue(d)}function Gn(d){n("keypress",d)}function Qn(d){if(n("keydown",d),Qi(d)===!0)return;const q=l.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),A=d.shiftKey!==!0&&t.multiple!==!0&&(a.value>-1||q===!0);if(d.keyCode===27){ke(d);return}if(d.keyCode===9&&A===!1){Qe();return}if(d.target===void 0||d.target.id!==p.targetUid.value||p.editable.value!==!0)return;if(d.keyCode===40&&p.innerLoading.value!==!0&&s.value===!1){be(d),Ye();return}if(d.keyCode===8&&t.hideSelected!==!0&&l.value.length===0){t.multiple===!0&&Array.isArray(t.modelValue)===!0?ln(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&n("update:modelValue",null);return}(d.keyCode===35||d.keyCode===36)&&(typeof l.value!="string"||l.value.length===0)&&(be(d),a.value=-1,It(d.keyCode===36?1:-1,t.multiple)),(d.keyCode===33||d.keyCode===34)&&z.value!==void 0&&(be(d),a.value=Math.max(-1,Math.min(R.value,a.value+(d.keyCode===33?-1:1)*z.value.view)),It(d.keyCode===33?1:-1,t.multiple)),(d.keyCode===38||d.keyCode===40)&&(be(d),It(d.keyCode===38?-1:1,t.multiple));const W=R.value;if((T===void 0||$<Date.now())&&(T=""),W>0&&t.useInput!==!0&&d.key!==void 0&&d.key.length===1&&d.altKey===!1&&d.ctrlKey===!1&&d.metaKey===!1&&(d.keyCode!==32||T.length!==0)){s.value!==!0&&Ye(d);const te=d.key.toLocaleLowerCase(),ee=T.length===1&&T[0]===te;$=Date.now()+1500,ee===!1&&(be(d),T+=te);const se=new RegExp("^"+T.split("").map(hn=>Eo.indexOf(hn)>-1?"\\"+hn:hn).join(".*"),"i");let he=a.value;if(ee===!0||he<0||se.test(ve.value(t.options[he]))!==!0)do he=Oi(he+1,-1,W-1);while(he!==a.value&&(We.value(t.options[he])===!0||se.test(ve.value(t.options[he]))!==!0));a.value!==he&&ae(()=>{Je(he),H(he),he>=0&&t.useInput===!0&&t.fillInput===!0&&Lt(ve.value(t.options[he]))});return}if(!(d.keyCode!==13&&(d.keyCode!==32||t.useInput===!0||T!=="")&&(d.keyCode!==9||A===!1))){if(d.keyCode!==9&&be(d),a.value>-1&&a.value<W){Le(t.options[a.value]);return}if(q===!0){const te=(ee,se)=>{if(se){if(Ai(se)!==!0)return}else se=t.newValueMode;if(ct("",t.multiple!==!0,!0),ee==null)return;(se==="toggle"?Le:Nn)(ee,se==="add-unique"),t.multiple!==!0&&(V.value!==null&&V.value.focus(),Ve())};if(t.onNewValue!==void 0?n("newValue",l.value,te):te(l.value),t.multiple!==!0)return}s.value===!0?Qe():p.innerLoading.value!==!0&&Ye()}}function Yn(){return f===!0?Q.value:N.value!==null&&N.value.contentEl!==null?N.value.contentEl:void 0}function Rr(){return Yn()}function Pr(){return t.hideSelected===!0?[]:e["selected-item"]!==void 0?Ie.value.map(d=>e["selected-item"](d)).slice():e.selected!==void 0?[].concat(e.selected()):t.useChips===!0?Ie.value.map((d,q)=>O(Ns,{key:"option-"+q,removable:p.editable.value===!0&&We.value(d.opt)!==!0,dense:!0,textColor:t.color,tabindex:qe.value,onRemove(){d.removeAtIndex(q)}},()=>O("span",{class:"ellipsis",[d.html===!0?"innerHTML":"textContent"]:ve.value(d.opt)}))):[O("span",{[Oe.value===!0?"innerHTML":"textContent"]:E.value})]}function Xn(){if(M.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:l.value}):void 0;const d=e.option!==void 0?e.option:A=>O(Ks,{key:A.index,...A.itemProps},()=>O(Ws,()=>O(Js,()=>O("span",{[A.html===!0?"innerHTML":"textContent"]:A.label}))));let q=D("div",Ke.value.map(d));return e["before-options"]!==void 0&&(q=e["before-options"]().concat(q)),Wr(e["after-options"],q)}function jr(d,q){const A=q===!0?{..._e.value,...p.splitAttrs.attributes.value}:void 0,W={ref:q===!0?V:void 0,key:"i_t",class:L.value,style:t.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...A,id:q===!0?p.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":d===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...Or.value};return d!==!0&&f===!0&&(Array.isArray(W.class)===!0?W.class=[...W.class,"no-pointer-events"]:W.class+=" no-pointer-events"),O("input",W)}function Zn(d){h!==null&&(clearTimeout(h),h=null),!(d&&d.target&&d.target.qComposing===!0)&&(Lt(d.target.value||""),g=!0,y=l.value,p.focused.value!==!0&&(f!==!0||c.value===!0)&&p.focus(),t.onFilter!==void 0&&(h=setTimeout(()=>{h=null,Ge(l.value)},t.inputDebounce)))}function Lt(d){l.value!==d&&(l.value=d,n("inputValue",d))}function ct(d,q,A){g=A!==!0,t.useInput===!0&&(Lt(d),(q===!0||A!==!0)&&(y=d),q!==!0&&Ge(d))}function Ge(d,q,A){if(t.onFilter===void 0||q!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?n("filterAbort"):(p.innerLoading.value=!0,u.value=!0),d!==""&&t.multiple!==!0&&_.value.length!==0&&g!==!0&&d===ve.value(_.value[0])&&(d="");const W=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);C!==null&&clearTimeout(C),C=W,n("filter",d,(te,ee)=>{(q===!0||p.focused.value===!0)&&C===W&&(clearTimeout(C),typeof te=="function"&&te(),u.value=!1,ae(()=>{p.innerLoading.value=!1,p.editable.value===!0&&(q===!0?s.value===!0&&Ve():s.value===!0?dn(!0):s.value=!0),typeof ee=="function"&&ae(()=>{ee(i)}),typeof A=="function"&&ae(()=>{A(i)})}))},()=>{p.focused.value===!0&&C===W&&(clearTimeout(C),p.innerLoading.value=!1,u.value=!1),s.value===!0&&(s.value=!1)})}function qr(){return O(vo,{ref:N,class:P.value,style:t.popupContentStyle,modelValue:s.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&M.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:j.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:ut.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Pt.value,onScrollPassive:w,onBeforeShow:ti,onBeforeHide:Ir,onShow:Lr},Xn)}function Ir(d){ni(d),Qe()}function Lr(){ie()}function Vr(d){Re(d),V.value!==null&&V.value.focus(),c.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Mr(d){Re(d),ae(()=>{c.value=!1})}function Fr(){const d=[O(zs,{class:`col-auto ${p.fieldClass.value}`,...v.value,for:p.targetUid.value,dark:j.value,square:!0,loading:u.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...p.splitAttrs.listeners.value,onFocus:Vr,onBlur:Mr},{...e,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&d.push(O("div",{ref:Q,class:P.value+" scroll",style:t.popupContentStyle,...Pt.value,onClick:ke,onScrollPassive:w},Xn())),O(_o,{ref:B,modelValue:o.value,position:t.useInput===!0?"top":void 0,transitionShow:F,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:ti,onBeforeHide:Dr,onHide:Br,onShow:Ur},()=>O("div",{class:"q-select__dialog"+(j.value===!0?" q-select__dialog--dark q-dark":"")+(c.value===!0?" q-select__dialog--focused":"")},d))}function Dr(d){ni(d),B.value!==null&&B.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function Br(d){Ve(),p.focused.value===!1&&n("blur",d),Xe()}function Ur(){const d=document.activeElement;(d===null||d.id!==p.targetUid.value)&&V.value!==null&&V.value!==d&&V.value.focus(),ie()}function Qe(){o.value!==!0&&(a.value=-1,s.value===!0&&(s.value=!1),p.focused.value===!1&&(C!==null&&(clearTimeout(C),C=null),p.innerLoading.value===!0&&(n("filterAbort"),p.innerLoading.value=!1,u.value=!1)))}function Ye(d){p.editable.value===!0&&(f===!0?(p.onControlFocusin(d),o.value=!0,ae(()=>{p.focus()})):p.focus(),t.onFilter!==void 0?Ge(l.value):(M.value!==!0||e["no-option"]!==void 0)&&(s.value=!0))}function Ve(){o.value=!1,Qe()}function Xe(){t.useInput===!0&&ct(t.multiple!==!0&&t.fillInput===!0&&_.value.length!==0&&ve.value(_.value[0])||"",!0,!0)}function dn(d){let q=-1;if(d===!0){if(_.value.length!==0){const A=fe.value(_.value[0]);q=t.options.findIndex(W=>dt(fe.value(W),A))}J(q)}Je(q)}function zr(d,q){s.value===!0&&p.innerLoading.value===!1&&(J(-1,!0),ae(()=>{s.value===!0&&p.innerLoading.value===!1&&(d>q?J():dn(!0))}))}function ei(){o.value===!1&&N.value!==null&&N.value.updatePosition()}function ti(d){d!==void 0&&Re(d),n("popupShow",d),p.hasPopupOpen=!0,p.onControlFocusin(d)}function ni(d){d!==void 0&&Re(d),n("popupHide",d),p.hasPopupOpen=!1,p.onControlFocusout(d)}function ii(){f=r.platform.is.mobile!==!0&&t.behavior!=="dialog"?!1:t.behavior!=="menu"&&(t.useInput===!0?e["no-option"]!==void 0||t.onFilter!==void 0||M.value===!1:!0),F=r.platform.is.ios===!0&&f===!0&&t.useInput===!0?"fade":t.transitionShow}return Ji(ii),os(ei),ii(),ge(()=>{h!==null&&clearTimeout(h)}),Object.assign(i,{showPopup:Ye,hidePopup:Ve,removeAtIndex:ln,add:Nn,toggleOption:Le,getOptionIndex:()=>a.value,setOptionIndex:Je,moveOptionSelection:It,filter:Ge,updateMenuPosition:ei,updateInputValue:ct,isOptionSelected:cn,getEmittingOptionValue:Hn,isOptionDisabled:(...d)=>We.value.apply(null,d)===!0,getOptionValue:(...d)=>fe.value.apply(null,d),getOptionLabel:(...d)=>ve.value.apply(null,d)}),Object.assign(p,{innerValue:_,fieldClass:S(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:I,targetRef:V,hasValue:G,showPopup:Ye,floatingLabel:S(()=>t.hideSelected!==!0&&G.value===!0||typeof l.value=="number"||l.value.length!==0||Ct(t.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(o.value===!0||M.value!==!0||e["no-option"]!==void 0))return f===!0?Fr():qr();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(d){p.onControlFocusin(d)},onFocusout(d){p.onControlFocusout(d,()=>{Xe(),Qe()})},onClick(d){if(ke(d),f!==!0&&s.value===!0){Qe(),V.value!==null&&V.value.focus();return}Ye(d)}},getControl:d=>{const q=Pr(),A=d===!0||o.value!==!0||f!==!0;if(t.useInput===!0)q.push(jr(d,A));else if(p.editable.value===!0){const te=A===!0?_e.value:void 0;q.push(O("input",{ref:A===!0?V:void 0,key:"d_t",class:"q-select__focus-target",id:A===!0?p.targetUid.value:void 0,value:E.value,readonly:!0,"data-autofocus":d===!0||t.autofocus===!0||void 0,...te,onKeydown:Qn,onKeyup:Wn,onKeypress:Gn})),A===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&q.push(O("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:Jn}))}if(b.value!==void 0&&t.disable!==!0&&qt.value.length!==0){const te=qt.value.map(ee=>O("option",{value:ee,selected:!0}));q.push(O("select",{class:"hidden",name:b.value,multiple:t.multiple},te))}const W=t.useInput===!0||A!==!0?void 0:p.splitAttrs.attributes.value;return O("div",{class:"q-field__native row items-center",...W,...p.splitAttrs.listeners.value},q)},getInnerAppend:()=>t.loading!==!0&&u.value!==!0&&t.hideDropdownIcon!==!0?[O(rt,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:jt.value})]:null}),Vn(p)}});const Ao=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>$t(()=>Promise.resolve().then(function(){return Rt}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Mn extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class $o extends Mn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ro extends Mn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Po extends Mn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jo=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class qo{constructor(e,{headers:n={},customFetch:i}={}){this.url=e,this.headers=n,this.fetch=Ao(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return jo(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=n;let a={},l;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob!="undefined"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData!="undefined"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:l}).catch(f=>{throw new $o(f)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Ro(c);if(!c.ok)throw new Po(c);let h=((i=c.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield c.json():h==="application/octet-stream"?m=yield c.blob():h==="multipart/form-data"?m=yield c.formData():m=yield c.text(),{data:m,error:null}}catch(r){return{data:null,error:r}}})}}var Ri=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Tt={exports:{}};(function(t,e){var n=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ri!="undefined")return Ri;throw new Error("unable to locate global object")},i=n();t.exports=e=i.fetch,i.fetch&&(e.default=i.fetch.bind(i)),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response})(Tt,Tt.exports);var Fn=Tt.exports,Rt=xs({__proto__:null,default:Fn},[Tt.exports]);class Io{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch=="undefined"?this.fetch=Fn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,h=null,m=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const F=await s.text();F===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=F:u=JSON.parse(F))}const C=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");C&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const C=await s.text();try{c=JSON.parse(C),Array.isArray(c)&&s.status===404&&(u=[],c=null,m=200,f="OK")}catch{s.status===404&&C===""?(m=204,f="No Content"):c={message:C}}if(c&&this.isMaybeSingle&&((l=c==null?void 0:c.details)===null||l===void 0?void 0:l.includes("0 rows"))&&(c=null,m=200,f="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}}class Lo extends Io{select(e){let n=!1;const i=(e!=null?e:"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:r}={}){const s=r?`${r}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n}={}){const i=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:i}={}){const r=typeof i=="undefined"?"offset":`${i}.offset`,s=typeof i=="undefined"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(s,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class it extends Lo{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=n.map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}}class Vo{constructor(e,{headers:n={},schema:i,fetch:r}){this.url=e,this.headers=n,this.schema=i,this.fetch=r}select(e,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new it({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new it({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new it({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new it({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new it({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Mo="1.8.5",Fo={"X-Client-Info":`postgrest-js/${Mo}`};class Dn{constructor(e,{headers:n={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Fo),n),this.schemaName=i,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new Vo(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,count:r}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;i?(s="HEAD",Object.entries(n).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(s="POST",a=n);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new it({method:s,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Do="websocket",Bo="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Uo=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],zo="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ho=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],No="1.0.34",Ko={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Wo="https://github.com/theturtle32/WebSocket-Node",Jo={node:">=4.0.0"},Go={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Qo={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Yo={verbose:!1},Xo={test:"tape test/unit/*.js",gulp:"gulp"},Zo="index",ea={lib:"./lib"},ta="lib/browser.js",na="Apache-2.0";var ia={name:Do,description:Bo,keywords:Uo,author:zo,contributors:Ho,version:No,repository:Ko,homepage:Wo,engines:Jo,dependencies:Go,devDependencies:Qo,config:Yo,scripts:Xo,main:Zo,directories:ea,browser:ta,license:na},ra=ia.version,De;if(typeof globalThis=="object")De=globalThis;else try{De=require("es5-ext/global")}catch{}finally{if(!De&&typeof window!="undefined"&&(De=window),!De)throw new Error("Could not determine global this")}var Et=De.WebSocket||De.MozWebSocket,sa=ra;function br(t,e){var n;return e?n=new Et(t,e):n=new Et(t),n}Et&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(br,t,{get:function(){return Et[t]}})});var oa={w3cwebsocket:Et?br:null,version:sa};const aa="2.8.0",la={"X-Client-Info":`realtime-js/${aa}`},ua="1.0.0",wr=1e4,ca=1e3;var _t;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_t||(_t={}));var me;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(me||(me={}));var ye;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ye||(ye={}));var $n;(function(t){t.websocket="websocket"})($n||($n={}));var Be;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Be||(Be={}));class _r{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class da{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const r=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class _n{constructor(e,n,i={},r=wr){this.channel=e,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Pi||(Pi={}));class St{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=St.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=St.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=St.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,r){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const m=u.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),g=u.filter(y=>f.indexOf(y.presence_ref)<0),C=h.filter(y=>m.indexOf(y.presence_ref)<0);g.length>0&&(a[c]=g),C.length>0&&(l[c]=C)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,n,i,r){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...m)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const r=e[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const ji=(t,e,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=ha(o,t,e,r),s),{})},ha=(t,e,n,i)=>{const r=e.find(a=>a.name===t),s=r==null?void 0:r.type,o=n[t];return s&&!i.includes(s)?Sr(s,o):Rn(o)},Sr=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ga(e,n)}switch(t){case ne.bool:return fa(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return va(e);case ne.json:case ne.jsonb:return ma(e);case ne.timestamp:return pa(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return Rn(e);default:return Rn(e)}},Rn=t=>t,fa=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},va=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ma=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ga=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Sr(e,a))}return t},pa=t=>typeof t=="string"?t.replace(" ","T"):t;var qi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qi||(qi={}));var Ii;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Ii||(Ii={}));var Li;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Li||(Li={}));class Bn{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new _n(this,ye.join,this.params,this.timeout),this.rejoinTimer=new _r(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=me.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ye.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new St(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(c=>c.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,m=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,f=[];for(let g=0;g<m;g++){const C=h[g],{filter:{event:y,schema:F,table:T,filter:$}}=C,I=c&&c[g];if(I&&I.event===y&&I.schema===F&&I.table===T&&I.filter===$)f.push(Object.assign(Object.assign({},C),{id:I.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{apikey:(i=this.socket.accessToken)!==null&&i!==void 0?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);c.rateLimited&&s("rate limited"),e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=me.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ye.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new _n(this,ye.leave,{},e);r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),o}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new _n(this,e,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ye;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let m=this._onMessage(o,n,i);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var g,C,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(C=f.filter)===null||C===void 0?void 0:C.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(m,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,C,y,F,T,$;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const I=f.id,V=(g=f.filter)===null||g===void 0?void 0:g.event;return I&&((C=n.ids)===null||C===void 0?void 0:C.includes(I))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const I=(T=(F=f==null?void 0:f.filter)===null||F===void 0?void 0:F.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return I==="*"||I===(($=n==null?void 0:n.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:C,table:y,commit_timestamp:F,type:T,errors:$}=g;m=Object.assign(Object.assign({},{schema:C,table:y,commit_timestamp:F,eventType:T,new:{},old:{},errors:$}),this._getPayloadRecords(g))}f.callback(m,i)})}_isClosed(){return this.state===me.closed}_isJoined(){return this.state===me.joined}_isJoining(){return this.state===me.joining}_isLeaving(){return this.state===me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Bn.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ye.close,{},e)}_onError(e){this._on(ye.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ji(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ji(e.columns,e.old_record)),n}}const ya=()=>{};class ba{constructor(e,n){var i,r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=la,this.params={},this.timeout=wr,this.transport=oa.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ya,this.conn=null,this.sendBuffer=[],this.serializer=new da,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch=="undefined"?l=(...c)=>$t(()=>Promise.resolve().then(function(){return Rt}),void 0).then(({default:u})=>u(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${$n.websocket}`,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.transport&&(this.transport=n.transport),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s));const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;o&&(this.accessToken=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,l)=>l(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _r(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n!=null?n:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case _t.connecting:return Be.Connecting;case _t.open:return Be.Open;case _t.closing:return Be.Closing;default:return Be.Closed}}isConnected(){return this.connectionState()===Be.Open}channel(e,n={config:{}}){const i=new Bn(`realtime:${e}`,n,this);return this.channels.push(i),i}push(e){const{topic:n,event:i,payload:r,ref:s}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${n} ${i} (${s})`,r),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(i)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(ye.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ua}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:r,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||r===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ye.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${i}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ca,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,n=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),n>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},n)),!1)}}class Un extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ce(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wa extends Un{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Vi extends Un{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var _a=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const kr=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>$t(()=>Promise.resolve().then(function(){return Rt}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Sa=()=>_a(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield $t(()=>Promise.resolve().then(function(){return Rt}),void 0)).Response:Response});var at=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const Sn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ka=(t,e)=>at(void 0,void 0,void 0,function*(){const n=yield Sa();t instanceof n?t.json().then(i=>{e(new wa(Sn(i),t.status||500))}).catch(i=>{e(new Vi(Sn(i),i))}):e(new Vi(Sn(t),t))}),xa=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};function sn(t,e,n,i,r,s){return at(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,xa(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ka(l,a))})})}function Pn(t,e,n,i){return at(this,void 0,void 0,function*(){return sn(t,"GET",e,n,i)})}function Pe(t,e,n,i,r){return at(this,void 0,void 0,function*(){return sn(t,"POST",e,i,r,n)})}function Ca(t,e,n,i,r){return at(this,void 0,void 0,function*(){return sn(t,"PUT",e,i,r,n)})}function xr(t,e,n,i,r){return at(this,void 0,void 0,function*(){return sn(t,"DELETE",e,i,r,n)})}var pe=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const Ta={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ea{constructor(e,n={},i,r){this.url=e,this.headers=n,this.bucketId=i,this.fetch=kr(r)}uploadOrUpdate(e,n,i,r){return pe(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Mi),r),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob!="undefined"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl)):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(n),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));if(u.ok)return{data:{path:l},error:null};{const h=yield u.json();return{data:null,error:h}}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}upload(e,n,i){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,r){return pe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Mi.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob!="undefined"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u});if(h.ok)return{data:{path:s},error:null};{const m=yield h.json();return{data:null,error:m}}}catch(l){if(ce(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=yield Pe(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),r=new URL(this.url+i.url),s=r.searchParams.get("token");if(!s)throw new Un("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:s},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}update(e,n,i){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n){return pe(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers}),error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}copy(e,n){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield Pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,i){return pe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield Pe(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,i){return pe(this,void 0,void 0,function*(){try{const r=yield Pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}download(e,n){return pe(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)!="undefined"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Pn(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ce(a))return{data:null,error:a};throw a}})}getPublicUrl(e,n){const i=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const a=typeof(n==null?void 0:n.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(e){return pe(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}list(e,n,i){return pe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ta),n),{prefix:e||""});return{data:yield Pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Oa="2.5.4",Aa={"X-Client-Info":`storage-js/${Oa}`};var et=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class $a{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},Aa),n),this.fetch=kr(i)}listBuckets(){return et(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}getBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return et(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return et(this,void 0,void 0,function*(){try{return{data:yield Ca(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}emptyBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}}class Ra extends $a{constructor(e,n={},i){super(e,n,i)}from(e){return new Ea(this.url,this.headers,e,this.fetch)}}const Pa="2.38.0";let yt="";typeof Deno!="undefined"?yt="deno":typeof document!="undefined"?yt="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?yt="react-native":yt="node";const ja={"X-Client-Info":`supabase-js-${yt}/${Pa}`};var qa=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const Ia=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=Fn:e=fetch,(...n)=>e(...n)},La=()=>typeof Headers=="undefined"?Tt.exports.Headers:Headers,Va=(t,e,n)=>{const i=Ia(n),r=La();return(s,o)=>qa(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};function Ma(t){return t.replace(/\/$/,"")}function Fa(t,e){const{db:n,auth:i,realtime:r,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s)}}function Da(t){return Math.round(Date.now()/1e3)+t}function Ba(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Te=()=>typeof document!="undefined",Fe={tested:!1,writable:!1},kt=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fe.tested)return Fe.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fe.tested=!0,Fe.writable=!0}catch{Fe.tested=!0,Fe.writable=!1}return Fe.writable};function kn(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{e[r]=i}),e}const Cr=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>$t(()=>Promise.resolve().then(function(){return Rt}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Ua=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",tt=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},zt=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},xn=async(t,e)=>{await t.removeItem(e)};function za(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",i,r,s,o,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),i=o<<2|a>>4,r=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(i),l!=64&&r!=0&&(n=n+String.fromCharCode(r)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class on{constructor(){this.promise=new on.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}on.promiseConstructor=Promise;function Fi(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=n[1];return JSON.parse(za(i))}async function Ha(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Na(t,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function Ka(t){return("0"+t.toString(16)).substr(-2)}function vt(){const e=new Uint32Array(56);if(typeof crypto=="undefined"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,Ka).join("")}async function Wa(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function Ja(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mt(t){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Wa(t);return Ja(n)}class zn extends Error{constructor(e,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ga extends zn{constructor(e,n){super(e,n),this.name="AuthApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Qa(t){return Y(t)&&t.name==="AuthApiError"}class Tr extends zn{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lt extends zn{constructor(e,n,i){super(e),this.name=n,this.status=i}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nt extends lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Cn extends lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Ht extends lt{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Nt extends lt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Di extends lt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jn extends lt{constructor(e,n){super(e,"AuthRetryableFetchError",n)}}function Bi(t){return Y(t)&&t.name==="AuthRetryableFetchError"}var Ya=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};const bt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Xa=[502,503,504];async function Ui(t){if(!Ua(t))throw new jn(bt(t),0);if(Xa.includes(t.status))throw new jn(bt(t),t.status);let e;try{e=await t.json()}catch(n){throw new Tr(bt(n),n)}throw new Ga(bt(e),t.status||500)}const Za=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function X(t,e,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await el(t,e,n+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function el(t,e,n,i,r,s){const o=Za(e,i,r,s);let a;try{a=await t(n,o)}catch(l){throw console.error(l),new jn(bt(l),0)}if(a.ok||await Ui(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await Ui(l)}}function Ae(t){var e;let n=null;rl(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Da(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function je(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function tl(t){return{data:t,error:null}}function nl(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=t,o=Ya(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function il(t){return t}function rl(t){return t.access_token&&t.refresh_token&&t.expires_in}var sl=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};class ol{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=Cr(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:je})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=sl(e,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:nl,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Y(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:je})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:il});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const C=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);c[`${y}Page`]=C}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Y(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await X(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:je})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:je})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:je})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:n,error:i}=await X(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}}const Er="2.55.0",al="http://localhost:9999",ll="supabase.auth.token",ul={"X-Client-Info":`gotrue-js/${Er}`},zi=10,cl={getItem:t=>kt()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{!kt()||globalThis.localStorage.setItem(t,e)},removeItem:t=>{!kt()||globalThis.localStorage.removeItem(t)}};function Hi(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function dl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}globalThis&&kt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class hl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}dl();const fl={url:al,storageKey:ll,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ul,flowType:"implicit",debug:!1},gt=30*1e3,Ni=3;async function vl(t,e,n){return await n()}class Ot{constructor(e){var n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ot.nextInstanceID,Ot.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},fl),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ol({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Cr(i.fetch),this.lock=i.lock||vl,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:kt()?this.storage=cl:(this.memoryStorage={},this.storage=Hi(this.memoryStorage)):(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Er}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Te()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:i}=await this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),await this._removeSession(),{error:i};const{session:r,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Y(e)?{error:e}:{error:new Tr("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var n,i,r;try{await this._removeSession();let s;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,g=null;if(this.flowType==="pkce"){const C=vt();await tt(this.storage,`${this.storageKey}-code-verifier`,C),f=await mt(C),g=C===f?"plain":"s256"}s=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:Ae})}else if("phone"in e){const{phone:u,password:h,options:m}=e;s=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ae})}else throw new Ht("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ae})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ae})}else throw new Ht("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Cn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:{user:i.user,session:i.session},error:r})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,r,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await zt(this.storage,`${this.storageKey}-code-verifier`),{data:i,error:r}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ae});return await xn(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Cn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:r})}async signInWithIdToken(e){await this._removeSession();try{const{options:n,provider:i,token:r,access_token:s,nonce:o}=e,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ae}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Cn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,r,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const m=vt();await tt(this.storage,`${this.storageKey}-code-verifier`,m),c=await mt(m),u=m===c?"plain":"s256"}const{error:h}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ht("You must provide either an email or phone number.")}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ae});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,i,r;try{return await this._removeSession(),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:tl})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new nt;const{error:r}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ht("You must provide either an email or phone number and a type")}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await zt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:je}):await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)throw o;return await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:je})})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new nt;const o=r.session;let a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const h=vt();await tt(this.storage,`${this.storageKey}-code-verifier`,h),a=await mt(h),l=h===a?"plain":"s256"}const{data:c,error:u}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:je});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return Fi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nt;const n=Date.now()/1e3;let i=n,r=!0,s=null;const o=Fi(e.access_token);if(o.exp&&(i=o.exp,r=i<=n),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Y(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new nt;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Te())throw new Nt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Nt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Di("Not a valid PKCE flow url.");const n=kn(window.location.href);if(e){if(!n.code)throw new Di("No code detected.");const{data:T,error:$}=await this._exchangeCodeForSession(n.code);if($)throw $;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:T.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Nt(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=n;if(!s||!a||!o||!c)throw new Nt("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let m=u+h;l&&(m=parseInt(l));const f=m-u;f*1e3<=gt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,m,u);const{data:C,error:y}=await this._getUser(s);if(y)throw y;const F={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:n.type},error:null}}catch(n){if(Y(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=kn(window.location.href);return!!(Te()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=kn(window.location.href),n=await zt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Qa(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await xn(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const n=Ba(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:o}=n;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let i=null,r=null;if(this.flowType==="pkce"){const s=vt();await tt(this.storage,`${this.storageKey}-code-verifier`,s),i=await mt(s),r=s===i?"plain":"s256"}try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Na(async r=>(await Ha(r*200),this._debug(n,"refreshing attempt",r),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ae})),(r,s,o)=>o&&o.error&&Bi(o.error)&&Date.now()+(r+1)*200-i<gt)}catch(i){if(this._debug(n,"error",i),Y(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Te()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await zt(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<r+zi;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${zi}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Bi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new on;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new nt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),Y(s)){const o={session:null,error:s};return(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),tt(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await xn(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/gt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${gt}ms, refresh threshold is ${Ni} ticks`),r<=Ni&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hl)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n){const i=[`provider=${encodeURIComponent(e)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const r=vt();await tt(this.storage,`${this.storageKey}-code-verifier`,r);const s=await mt(r),o=r===s?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",s,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return`${this.url}/authorize?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:a,error:l}=await X(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],r=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Ot.nextInstanceID=0;class ml extends Ot{constructor(e){super(e)}}var gl=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const pl={headers:ja},yl={schema:"public"},bl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wl={};class _l{constructor(e,n,i){var r,s,o,a,l,c,u,h;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const m=Ma(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:yl,realtime:wl,auth:Object.assign(Object.assign({},bl),{storageKey:f}),global:pl},C=Fa(i!=null?i:{},g);this.storageKey=(s=(r=C.auth)===null||r===void 0?void 0:r.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=C.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=C.auth)!==null&&l!==void 0?l:{},this.headers,(c=C.global)===null||c===void 0?void 0:c.fetch),this.fetch=Va(n,this._getAccessToken.bind(this),(u=C.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},C.realtime)),this.rest=new Dn(`${m}/rest/v1`,{headers:this.headers,schema:(h=C.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new qo(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ra(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return gl(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,debug:a},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ml({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new ba(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.realtime.setAuth(i!=null?i:null),this.changedAccessToken=i):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sl=(t,e,n)=>new _l(t,e,n),kl={class:"row justify-between q-col-gutter-y-md q-col-gutter-x-sm"},xl="https://vhfymgdmtvjpitnlruuq.supabase.co",Cl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZoZnltZ2RtdHZqcGl0bmxydXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYyMDY0ODMsImV4cCI6MjAxMTc4MjQ4M30.rtFqHXabezswjJydQTYembdjoRa8Il1QKBYH71VQtOw",Tl=Yi({__name:"RegistrationForm",setup(t){const e=Sl(xl,Cl),{t:n}=ks({useScope:"global"}),i=K({phone_number:"",first_name:"",last_name:"",age:"",gender:"",bio:""}),r=[{id:"cb267d3f-ac75-4a07-99fa-40f2c2e5b91f",label:"male"},{id:"2465f2f8-389d-40ce-b2d8-111298eb2b68",label:"female"}],s=[];for(let l=18;l<100;l++)s.push(l);const o=()=>{const l=[];for(let c=0;c<r.length;c++){const u=r[c],h={id:u.id,label:n(u.label)};l.push(h)}return l},a=async()=>{await e.from("USERS").insert([i.value])};return(l,c)=>(Xi(),as("div",kl,[$e(Dt,{modelValue:i.value.phone_number,"onUpdate:modelValue":c[0]||(c[0]=u=>i.value.phone_number=u),class:"col-12",mask:"(###) ###-####",label:l.$t("phoneNumber"),dense:""},null,8,["modelValue","label"]),$e(Dt,{modelValue:i.value.first_name,"onUpdate:modelValue":c[1]||(c[1]=u=>i.value.first_name=u),class:"col-6",label:l.$t("firstName"),dense:""},null,8,["modelValue","label"]),$e(Dt,{modelValue:i.value.last_name,"onUpdate:modelValue":c[2]||(c[2]=u=>i.value.last_name=u),class:"col-6",label:l.$t("lastName"),dense:""},null,8,["modelValue","label"]),$e($i,{modelValue:i.value.age,"onUpdate:modelValue":c[3]||(c[3]=u=>i.value.age=u),options:s,class:"col-6",label:l.$t("age"),dense:""},null,8,["modelValue","label"]),$e($i,{modelValue:i.value.gender,"onUpdate:modelValue":c[4]||(c[4]=u=>i.value.gender=u),options:o(),"emit-value":"","map-options":"","option-value":"id","option-label":"label",class:"col-6",label:l.$t("gender"),dense:""},null,8,["modelValue","options","label"]),$e(Dt,{modelValue:i.value.bio,"onUpdate:modelValue":c[5]||(c[5]=u=>i.value.bio=u),class:"col-12",label:l.$t("bio"),type:"textarea",dense:"",autogrow:""},null,8,["modelValue","label"]),$e(ps,{label:l.$t("submit"),class:"col q-py-xs q-mt-md q-mx-lg",onClick:a,color:"primary",noCaps:""},null,8,["label"])]))}}),Pl=Yi({__name:"IndexPage",setup(t){return(e,n)=>(Xi(),ls(Cs,{class:"q-pa-md row justify-center items-start"},{default:us(()=>[$e(Tl,{style:{"max-width":"30rem"}})]),_:1}))}});export{Pl as default};
